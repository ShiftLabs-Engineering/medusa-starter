(()=>{var e={};e.id=101,e.ids=[101],e.modules={2166:(e,t,r)=>{"use strict";r.d(t,{KC:()=>c,UiRadioGroup:()=>i,jC:()=>l,wE:()=>o});var s=r(18928),n=r(63037),a=r(81010);let i=({...e})=>(0,s.jsx)(n.z6,{...e}),o=({variant:e="ghost",className:t,...r})=>(0,s.jsx)(n.sx,{...r,className:(0,a.QP)("flex gap-2 group cursor-pointer items-center","outline"===e&&"p-4 gap-4 border border-grayscale-200 hover:border-grayscale-500 transition-colors",t)}),l=({className:e,...t})=>(0,s.jsx)("span",{...t,className:(0,a.QP)("border border-grayscale-200 w-4 h-4 block transition-colors rounded-full group-hover:border-grayscale-600 group-data-[selected]:border-black group-data-[selected]:border-6 group-hover:group-data-[selected]:border-grayscale-600",e)}),c=({className:e,...t})=>(0,s.jsx)("span",{...t,className:e})},2955:e=>{e.exports=function(e){return function(){return e}}},3170:(e,t,r)=>{var s=r(826),n=r(1827),a=r(66646),i=s?s.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||n(e)||!!(i&&e&&e[i])}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4472:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8072:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,36197,23)),Promise.resolve().then(r.t.bind(r,57232,23)),Promise.resolve().then(r.bind(r,99559)),Promise.resolve().then(r.bind(r,44201)),Promise.resolve().then(r.bind(r,34898))},10688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return s}});let s=r(81951).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10714:(e,t,r)=>{var s=r(39759),n=r(32952);e.exports=function(e,t){return s(e,t,function(t,r){return n(e,r)})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11625:e=>{e.exports=function(e){return e.split("")}},12571:(e,t,r)=>{var s=r(71995);e.exports=r(46008)(s)},13342:(e,t,r)=>{var s=r(46733),n=r(11081),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var i=e[t];a.call(e,t)&&n(i,r)&&(void 0!==r||t in e)||s(e,t,r)}},13464:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(78738),n=r(77678);function a(){return(0,s.jsx)("div",{className:"absolute left-0 top-20 md:top-40 lg:top-0 w-[100vw] lg:max-w-[calc(100vw-((50vw-50%)+448px))] xl:max-w-[calc(100vw-((50vw-50%)+540px))] -ml-[calc(50vw-50%)] h-screen lg:w-full flex items-center justify-center",children:(0,s.jsx)(n.I,{name:"loader",className:"w-10 md:w-20 animate-spin"})})}},16557:e=>{var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},18785:(e,t,r)=>{var s=r(92793),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;e.exports=s(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(n,function(e,r,s,n){t.push(s?n.replace(a,"$1"):r||e)}),t})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19483:(e,t,r)=>{var s=r(826),n=r(48639),a=r(66646),i=r(62851),o=1/0,l=s?s.prototype:void 0,c=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return n(t,e)+"";if(i(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-o?"-0":r}},20094:(e,t,r)=>{var s=r(66646),n=r(67339),a=r(18785),i=r(65019);e.exports=function(e,t){return s(e)?e:n(e,t)?[e]:a(i(e))}},22632:(e,t,r)=>{"use strict";r.d(t,{LoginForm:()=>m});var s=r(18928);r(91153);var n=r(39994),a=r(62920),i=r(25673),o=r(81010),l=r(10567),c=r(15949),d=r(63056),u=r(53502);let p=l.z.object({email:l.z.string().email(),password:l.z.string().min(6)}),m=(0,d.R)(({className:e,redirectUrl:t,handleCheckout:r})=>{let{isPending:l,data:d,mutate:m}=(0,c.vz)(),f=(0,u.useRouter)();return(0,s.jsx)(a.lV,{onSubmit:e=>{m({...e,redirect_url:t},{onSuccess:t=>{r&&t.success?r({email:e.email}):t.success&&f.push(t.redirectUrl||"/")}})},schema:p,children:(0,s.jsxs)("div",{className:(0,o.QP)("flex flex-col gap-6 md:gap-8",e),children:[(0,s.jsx)(a.FO,{placeholder:"Email",name:"email",inputProps:{autoComplete:"email"},className:"flex-1"}),(0,s.jsx)(a.FO,{placeholder:"Password",name:"password",type:"password",className:"flex-1",inputProps:{autoComplete:"current-password"}}),(0,s.jsx)(i.LocalizedLink,{href:"/auth/forgot-password",variant:"underline",className:"self-start !pb-0 text-grayscale-500 leading-none",children:"Forgot password?"}),!d?.success&&(0,s.jsx)("p",{className:"text-red-primary text-sm",children:d?.message}),(0,s.jsx)(n.SubmitButton,{isLoading:l,children:"Log in"})]})})})},24398:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},26208:(e,t,r)=>{var s=r(3971);e.exports=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},27100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return n}});let s=""+r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function n(){let e=Object.defineProperty(Error(s),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=s,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},27303:(e,t,r)=>{var s=r(39509),n=r(39114),a=r(12571);e.exports=function(e){return a(n(e,void 0,s),e+"")}},27578:(e,t,r)=>{var s=r(10714);e.exports=r(27303)(function(e,t){return null==e?{}:s(e,t)})},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31069:(e,t,r)=>{"use strict";r.r(t),r.d(t,{UpsertAddressForm:()=>d});var s=r(18928),n=r(91153),a=r(92748),i=r(62920),o=r(13984),l=r(39994),c=r(15949);let d=(0,r(63056).R)(({addressId:e,region:t,defaultValues:r})=>{let{close:d}=n.useContext(a.RG),{mutate:u,isPending:p,data:m}=(0,c.x$)(e);return(0,s.jsx)(i.lV,{onSubmit:e=>{u(e,{onSuccess:e=>{e.success&&d()}})},schema:c.uE,defaultValues:{first_name:r?.first_name,last_name:r?.last_name,company:r?.company,address_1:r?.address_1,address_2:r?.address_2,phone:r?.phone,city:r?.city,postal_code:r?.postal_code,country_code:r?.country_code,province:r?.province},children:({setValue:n,watch:a})=>{let c=a(),d=!Object.values(c).some(e=>e)||!!r&&!Object.entries(c).some(([e,t])=>r[e]!==t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-md mb-8 md:mb-10",children:e?"Change address":"Add another address"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 md:gap-8 mb-8 md:mb-10",children:[(0,s.jsxs)("div",{className:"flex max-xs:flex-col gap-4 md:gap-6",children:[(0,s.jsx)(i.FO,{placeholder:"First name",name:"first_name",className:" flex-1",inputProps:{autoComplete:"given-name"}}),(0,s.jsx)(i.FO,{placeholder:"Last name",name:"last_name",className:" flex-1",inputProps:{autoComplete:"family-name"}})]}),(0,s.jsx)(i.FO,{placeholder:"Company (Optional)",name:"company",className:" flex-1",inputProps:{autoComplete:"organization"}}),(0,s.jsx)(i.FO,{placeholder:"Address",name:"address_1",inputProps:{autoComplete:"address-line1"}}),(0,s.jsx)(i.FO,{placeholder:"Apartment, suite, etc. (Optional)",name:"address_2",inputProps:{autoComplete:"address-line2"}}),(0,s.jsx)(i.FO,{placeholder:"Phone (Optional)",name:"phone",type:"tel",inputProps:{autoComplete:"tel"}}),(0,s.jsxs)("div",{className:"flex max-xs:flex-col gap-4 md:gap-6",children:[(0,s.jsx)(i.FO,{placeholder:"Postal code",name:"postal_code",className:" flex-1",inputProps:{autoComplete:"postal-code"}}),(0,s.jsx)(i.FO,{placeholder:"City",name:"city",className:" flex-1",inputProps:{autoComplete:"address-level2"}})]}),(0,s.jsxs)("div",{className:"flex max-xs:flex-col gap-4 md:gap-6",children:[(0,s.jsx)(i.FO,{placeholder:"Province (Optional)",name:"province",className:" flex-1",inputProps:{autoComplete:"address-level1"}}),(0,s.jsx)(i.nk,{selectProps:{region:t??void 0,defaultSelectedKey:r?.country_code,autoComplete:"country",onSelectionChange:e=>n("country_code",`${e}`)},name:"country_code",className:"flex-1"})]}),!m?.success&&(0,s.jsx)("p",{className:"text-red-primary",children:m?.error})]}),(0,s.jsxs)("div",{className:"flex gap-6 justify-between",children:[(0,s.jsx)(l.SubmitButton,{isLoading:p,isDisabled:d,children:e?"Save changes":"Add address"}),(0,s.jsx)(o.UiCloseButton,{variant:"outline",children:"Cancel"})]})]})}})})},32916:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},32952:(e,t,r)=>{var s=r(4472),n=r(77251);e.exports=function(e,t){return null!=e&&n(e,t,s)}},33459:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>o,O5:()=>a,QF:()=>i,z5:()=>n});var s=r(99834);let n=async()=>{let e=(await (0,s.UL)()).get("_medusa_jwt")?.value;return e?{authorization:`Bearer ${e}`}:{}},a=async e=>(await (0,s.UL)()).set("_medusa_jwt",e,{maxAge:604800,httpOnly:!0,sameSite:"strict",secure:!0}),i=async()=>(await (0,s.UL)()).set("_medusa_jwt","",{maxAge:-1}),o=async()=>(await (0,s.UL)()).get("_medusa_cart_id")?.value},33873:e=>{"use strict";e.exports=require("path")},34898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(75362).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/checkout/components/mobile-checkout-summary-wrapper/index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/checkout/components/mobile-checkout-summary-wrapper/index.tsx","default")},37041:(e,t,r)=>{var s=r(11625),n=r(16557),a=r(42809);e.exports=function(e){return n(e)?a(e):s(e)}},37204:(e,t,r)=>{"use strict";r.d(t,{Fr:()=>c,Y6:()=>o,cT:()=>d,x1:()=>l});var s=r(18928),n=r(27080),a=r(81010),i=r(87491);let o=({className:e,...t})=>(0,s.jsx)(n.Sc,{...t,className:(0,a.QP)("flex gap-2 group cursor-pointer items-center",e)}),l=({className:e,...t})=>(0,s.jsx)("div",{...t,className:(0,a.QP)("border border-grayscale-200 w-4 h-4 flex items-center group-hover:border-grayscale-600 justify-center group-data-[selected=true]:bg-black group-data-[selected=true]:border-black group-hover:group-data-[selected=true]:border-grayscale-600 group-hover:group-data-[selected=true]:bg-grayscale-600 transition-colors",e)}),c=({name:e="check",className:t,...r})=>(0,s.jsx)(i.I,{...r,name:e,className:(0,a.QP)("w-3 h-3 group-data-[selected=false]:opacity-0 group-data-[selected=true]:opacity-1 text-white",t)}),d=({className:e,...t})=>(0,s.jsx)("span",{...t,className:e})},37346:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var s=r(18928),n=r(56522);r(91153);var a=r(62920),i=r(56221),o=r(39994),l=r(36223);let c=(0,r(63056).R)(({cart:e})=>{let t=(0,l.WB)(),{promotions:r=[]}=e,n=async e=>{if(!e.code)return;let s=r.filter(e=>void 0===e.code).map(e=>e.code);s.push(e.code),await t.mutateAsync(s)};return(0,s.jsx)(a.lV,{onSubmit:n,schema:i.d,children:(0,s.jsxs)("div",{className:"flex max-sm:flex-col gap-x-6 gap-y-4 mb-8",children:[(0,s.jsx)(a.FO,{name:"code",inputProps:{autoFocus:!1,className:"max-lg:h-12"},placeholder:"Discount code",className:"flex-1"}),(0,s.jsx)(o.SubmitButton,{className:"lg:h-auto max-h-14 grow-0 h-12",children:"Apply"})]})})});var d=r(73700);let u=({cart:e})=>{let{currency_code:t,total:r,subtotal:n,tax_total:a,discount_total:i,shipping_total:o,gift_card_total:l}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-1 mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between max-lg:text-xs",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Subtotal"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsx)("p",{children:(0,d.$)({amount:n??0,currency_code:t})})})]}),!!i&&(0,s.jsxs)("div",{className:"flex justify-between max-lg:text-xs",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Discount"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsxs)("p",{children:["-"," ",(0,d.$)({amount:i??0,currency_code:t})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between max-lg:text-xs",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Shipping"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsx)("p",{children:(0,d.$)({amount:o??0,currency_code:t})})})]}),(0,s.jsxs)("div",{className:"flex justify-between max-lg:text-xs",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Taxes"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsx)("p",{children:(0,d.$)({amount:a??0,currency_code:t})})})]}),!!l&&(0,s.jsxs)("div",{className:"flex justify-between max-lg:text-xs",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Gift card"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsxs)("p",{children:["-"," ",(0,d.$)({amount:l??0,currency_code:t})]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-md",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Total"})}),(0,s.jsx)("div",{className:"self-end",children:(0,s.jsx)("p",{children:(0,d.$)({amount:r??0,currency_code:t})})})]}),(0,s.jsx)("div",{className:"absolute h-full w-auto top-0 right-0 bg-black"})]})};var p=r(39453),m=r(25673);let f=({item:e})=>{let{original_price:t,calculated_price:r,original_price_number:a,calculated_price_number:i}=e.variant?(0,n.R)(e.variant)??{}:{};return(0,s.jsx)("div",{children:(i??0)<(a??0)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-red-primary",children:r}),(0,s.jsx)("p",{className:"text-grayscale-500 line-through",children:t})]}):(0,s.jsx)("p",{children:r})})},h=({cart:e})=>{let t=e.items??[],r=t.length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8 lg:mb-16",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["Order â€” ",r," item",r>1?"s":""]})}),(0,s.jsx)(m.LocalizedButtonLink,{href:"/cart",variant:"link",children:"Edit cart"})]}),r>0&&t.sort((e,t)=>(e.created_at??"")>(t.created_at??"")?-1:1).map(e=>(0,s.jsxs)("div",{className:"flex gap-4 lg:gap-6 mb-8",children:[(0,s.jsx)(m.LocalizedLink,{href:`/products/${e.variant?.product?.handle}`,children:(0,s.jsx)(p.A,{thumbnail:e.variant?.product?.thumbnail,images:e.variant?.product?.images,size:"3/4",className:"w-25 lg:w-33"})}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.LocalizedLink,{href:`/products/${e.variant?.product?.handle}`,className:"font-semibold",children:e.product_title})}),(0,s.jsx)(f,{item:e})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 max-lg:text-xs",children:[e.variant?.title&&(0,s.jsxs)("p",{children:["Variant:"," ",(0,s.jsx)("span",{className:"ml-1",children:e.variant.title})]}),(0,s.jsxs)("p",{children:["Quantity: ",(0,s.jsx)("span",{className:"ml-1",children:e.quantity})]})]})]})]},e.id)),(0,s.jsx)(c,{cart:e}),(0,s.jsx)(u,{cart:e})]})}},38285:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a});var s=r(78738),n=r(29609);let a={title:"404",description:"Something went wrong"};async function i(){return(0,s.jsx)(n.default,{})}},39030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return u},getRedirectTypeFromError:function(){return d},getURLFromRedirectError:function(){return c},permanentRedirect:function(){return l},redirect:function(){return o}});let s=r(35275),n=r(58917),a=r(19121).actionAsyncStorage;function i(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let a=Object.defineProperty(Error(n.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=n.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",a}function o(e,t){var r;throw null!=t||(t=(null==a||null==(r=a.getStore())?void 0:r.isAction)?n.RedirectType.push:n.RedirectType.replace),i(e,t,s.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=n.RedirectType.replace),i(e,t,s.RedirectStatusCode.PermanentRedirect)}function c(e){return(0,n.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function d(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function u(e){if(!(0,n.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39114:(e,t,r)=>{var s=r(32916),n=Math.max;e.exports=function(e,t,r){return t=n(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,o=n(a.length-t,0),l=Array(o);++i<o;)l[i]=a[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=a[i];return c[t]=r(l),s(e,this,c)}}},39509:(e,t,r)=>{var s=r(98498);e.exports=function(e){return(null==e?0:e.length)?s(e,1):[]}},39759:(e,t,r)=>{var s=r(68451),n=r(42951),a=r(20094);e.exports=function(e,t,r){for(var i=-1,o=t.length,l={};++i<o;){var c=t[i],d=s(e,c);r(d,c)&&n(l,a(c,e),d)}return l}},41400:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return s}}),r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},42809:e=>{var t="\ud800-\udfff",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\ud83c[\udffb-\udfff]",n="[^"+t+"]",a="(?:\ud83c[\udde6-\uddff]){2}",i="[\ud800-\udbff][\udc00-\udfff]",o="(?:"+r+"|"+s+")?",l="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[n,a,i].join("|")+")"+l+o+")*",d=RegExp(s+"(?="+s+")|"+("(?:"+[n+r+"?",r,a,i,"["+t+"]"].join("|"))+")"+(l+o+c),"g");e.exports=function(e){return e.match(d)||[]}},42951:(e,t,r)=>{var s=r(13342),n=r(20094),a=r(40788),i=r(5408),o=r(84460);e.exports=function(e,t,r,l){if(!i(e))return e;t=n(t,e);for(var c=-1,d=t.length,u=d-1,p=e;null!=p&&++c<d;){var m=o(t[c]),f=r;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(c!=u){var h=p[m];void 0===(f=l?l(h,m,p):void 0)&&(f=i(h)?h:a(t[c+1])?[]:{})}s(p,m,f),p=p[m]}return e}},44201:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(75362).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/checkout/components/checkout-summary-wrapper/index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/checkout/components/checkout-summary-wrapper/index.tsx","default")},44779:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>s});let s=(0,r(75362).registerClientReference)(function(){throw Error("Attempted to call CheckoutForm() from the server but CheckoutForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/checkout/components/checkout-form/index.tsx","CheckoutForm")},46008:e=>{var t=Date.now;e.exports=function(e){var r=0,s=0;return function(){var n=t(),a=16-(n-s);if(s=n,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},46733:(e,t,r)=>{var s=r(26208);e.exports=function(e,t,r){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},48639:e=>{e.exports=function(e,t){for(var r=-1,s=null==e?0:e.length,n=Array(s);++r<s;)n[r]=t(e[r],r,e);return n}},51369:(e,t,r)=>{Promise.resolve().then(r.bind(r,73223))},53213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return d},RedirectType:function(){return n.RedirectType},forbidden:function(){return i.forbidden},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let s=r(39030),n=r(58917),a=r(27100),i=r(97189),o=r(41400),l=r(10688);class c extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class d extends URLSearchParams{append(){throw new c}delete(){throw new c}set(){throw new c}sort(){throw new c}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54034:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var s=r(18928),n=r(81010);let a=({colorScheme:e="grayscale",className:t,...r})=>(0,s.jsx)("div",{...r,className:(0,n.QP)("relative overflow-hidden shrink-0 rounded-2xs before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_1.5s_infinite] before:bg-gradient-to-r before:from-transparent before:to-transparent","grayscale"===e&&"bg-grayscale-50 before:via-white","white"===e&&"bg-white before:via-grayscale-50",t)})},55125:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(18928),n=r(91153),a=r(37346),i=r(87491),o=r(73700);let l=({cart:e})=>{let{currency_code:t,total:r}=e,l=n.useRef(null),c=n.useCallback(e=>{e.preventDefault();let t=e.currentTarget,r=l.current;if(!r||!t)return;let s=r.clientHeight,n=s>0,a=n?0:r.scrollHeight;r.style.height=`${s}px`,r.style.overflow="hidden",requestAnimationFrame(()=>{t.dataset.open=n?"no":"yes",r.style.height=`${a}px`})},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{type:"button",className:"h-18 flex justify-between items-center w-full group",onClick:c,"data-open":"no",children:[(0,s.jsx)("p",{children:"Order summary"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{children:(0,o.$)({amount:r??0,currency_code:t})}),(0,s.jsx)(i.I,{name:"chevron-down",className:"w-6 group-data-[open=yes]:rotate-180 transition-transform"})]})]}),(0,s.jsx)("div",{className:"overflow-hidden transition-[height]",ref:l,style:{height:"0px"},children:(0,s.jsx)("div",{className:"py-8",children:(0,s.jsx)(a.A,{cart:e})})})]})};var c=r(36223),d=r(63056),u=r(54034);let p=()=>(0,s.jsxs)("div",{className:"h-18 flex justify-between items-center w-full",children:[(0,s.jsx)(u.E,{colorScheme:"white",className:"h-6 w-30"}),(0,s.jsx)(u.E,{colorScheme:"white",className:"h-6 w-30"})]}),m=(0,d.R)(function(){let{data:e,isPending:t}=(0,c._$)({enabled:!0});return t||!e?(0,s.jsx)(p,{}):(0,s.jsx)(l,{cart:e})})},55931:(e,t,r)=>{var s=r(42218);function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var s=arguments,n=t?t.apply(this,s):s[0],a=r.cache;if(a.has(n))return a.get(n);var i=e.apply(this,s);return r.cache=a.set(n,i)||a,i};return r.cache=new(n.Cache||s),r}n.Cache=s,e.exports=n},62851:(e,t,r)=>{var s=r(62171),n=r(81203);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==s(e)}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65019:(e,t,r)=>{var s=r(19483);e.exports=function(e){return null==e?"":s(e)}},67339:(e,t,r)=>{var s=r(66646),n=r(62851),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(s(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||n(e))||i.test(e)||!a.test(e)||null!=t&&e in Object(t)}},68451:(e,t,r)=>{var s=r(20094),n=r(84460);e.exports=function(e,t){t=s(t,e);for(var r=0,a=t.length;null!=e&&r<a;)e=e[n(t[r++])];return r&&r==a?e:void 0}},70721:e=>{e.exports=function(e,t,r){var s=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++s<n;)a[s]=e[s+t];return a}},71624:(e,t,r)=>{Promise.resolve().then(r.bind(r,91971)),Promise.resolve().then(r.bind(r,77646)),Promise.resolve().then(r.bind(r,25673)),Promise.resolve().then(r.bind(r,82504)),Promise.resolve().then(r.bind(r,55125))},71995:(e,t,r)=>{var s=r(2955),n=r(26208),a=r(78577);e.exports=n?function(e,t){return n(e,"toString",{configurable:!0,enumerable:!1,value:s(t),writable:!0})}:a},73223:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>tS});var s,n,a,i,o=r(18928),l=r(63056),c=r(91153),d=r.n(c),u=r(53502),p="https://js.stripe.com",m="".concat(p,"/v3"),f=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,h=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,g=function(){for(var e=document.querySelectorAll('script[src^="'.concat(p,'"]')),t=0;t<e.length;t++){var r,s=e[t];if(r=s.src,f.test(r)||h.test(r))return s}return null},x=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(m).concat(t);var s=document.head||document.body;if(!s)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},v=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.10.0",startTime:t})},y=null,b=null,_=null,j=function(e,t,r){if(null===e)return null;var s,n=t[0].match(/^pk_test/),a=3===(s=e.version)?"v3":s;n&&"v3"!==a&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("5.10.0"," expected Stripe.js@").concat("v3",". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var i=e.apply(void 0,t);return v(i,r),i},w=!1,E=function(){return s?s:s=(null!==y?y:(y=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var r,s=g();s?s&&null!==_&&null!==b&&(s.removeEventListener("load",_),s.removeEventListener("error",b),null==(r=s.parentNode)||r.removeChild(s),s=x(null)):s=x(null),_=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},b=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},s.addEventListener("load",_),s.addEventListener("error",b)}catch(e){t(e);return}})).catch(function(e){return y=null,Promise.reject(e)})).catch(function(e){return s=null,Promise.reject(e)})};Promise.resolve().then(function(){return E()}).catch(function(e){w||console.warn(e)});var N=r(94789);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){O(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,s,n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){o=!0,s=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}var T=function(e,t,r){var s=!!r,n=c.useRef(r);c.useEffect(function(){n.current=r},[r]),c.useEffect(function(){if(!s||!e)return function(){};var r=function(){n.current&&n.current.apply(n,arguments)};return e.on(t,r),function(){e.off(t,r)}},[s,t,e,n])},I=function(e){var t=c.useRef(e);return c.useEffect(function(){t.current=e},[e]),t.current},L=function(e){return null!==e&&"object"===S(e)},D="[object Object]",F=function e(t,r){if(!L(t)||!L(r))return t===r;var s=Array.isArray(t);if(s!==Array.isArray(r))return!1;var n=Object.prototype.toString.call(t)===D;if(n!==(Object.prototype.toString.call(r)===D))return!1;if(!n&&!s)return t===r;var a=Object.keys(t),i=Object.keys(r);if(a.length!==i.length)return!1;for(var o={},l=0;l<a.length;l+=1)o[a[l]]=!0;for(var c=0;c<i.length;c+=1)o[i[c]]=!0;var d=Object.keys(o);return d.length===a.length&&d.every(function(s){return e(t[s],r[s])})},z=function(e,t,r){return L(e)?Object.keys(e).reduce(function(s,n){var a=!L(t)||!F(e[n],t[n]);return r.includes(n)?(a&&console.warn("Unsupported prop change: options.".concat(n," is not a mutable property.")),s):a?C(C({},s||{}),{},O({},n,e[n])):s},null):null},M="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(null===e||L(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;if(L(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return B(e,t)})};var r=B(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},$=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},K=c.createContext(null);K.displayName="ElementsContext";var Y=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},V=function(e){var t=e.stripe,r=e.options,s=e.children,n=c.useMemo(function(){return U(t)},[t]),a=R(c.useState(function(){return{stripe:"sync"===n.tag?n.stripe:null,elements:"sync"===n.tag?n.stripe.elements(r):null}}),2),i=a[0],o=a[1];c.useEffect(function(){var e=!0,t=function(e){o(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==n.tag||i.stripe?"sync"!==n.tag||i.stripe||t(n.stripe):n.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[n,i,r]);var l=I(t);c.useEffect(function(){null!==l&&l!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[l,t]);var d=I(r);return c.useEffect(function(){if(i.elements){var e=z(r,d,["clientSecret","fonts"]);e&&i.elements.update(e)}},[r,d,i.elements]),c.useEffect(function(){$(i.stripe)},[i.stripe]),c.createElement(K.Provider,{value:i},s)};V.propTypes={stripe:N.any,options:N.object};N.func.isRequired;var H=["on","session"],q=c.createContext(null);q.displayName="CheckoutSdkContext";var G=function(e,t){if(!e)throw Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e};c.createContext(null).displayName="CheckoutContext";N.any,N.shape({fetchClientSecret:N.func.isRequired,elementsOptions:N.object}).isRequired;var W=function(e){var t=c.useContext(q),r=c.useContext(K);if(t&&r)throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t?G(t,e):Y(r,e)},X=["mode"],Q=function(e,t){var r="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),s=t?function(e){W("mounts <".concat(r,">"));var t=e.id,s=e.className;return c.createElement("div",{id:t,className:s})}:function(t){var s,n=t.id,a=t.className,i=t.options,o=void 0===i?{}:i,l=t.onBlur,d=t.onFocus,u=t.onReady,p=t.onChange,m=t.onEscape,f=t.onClick,h=t.onLoadError,g=t.onLoaderStart,x=t.onNetworksChange,v=t.onConfirm,y=t.onCancel,b=t.onShippingAddressChange,_=t.onShippingRateChange,j=W("mounts <".concat(r,">")),w="elements"in j?j.elements:null,E="checkoutSdk"in j?j.checkoutSdk:null,N=R(c.useState(null),2),P=N[0],C=N[1],S=c.useRef(null),O=c.useRef(null);T(P,"blur",l),T(P,"focus",d),T(P,"escape",m),T(P,"click",f),T(P,"loaderror",h),T(P,"loaderstart",g),T(P,"networkschange",x),T(P,"confirm",v),T(P,"cancel",y),T(P,"shippingaddresschange",b),T(P,"shippingratechange",_),T(P,"change",p),u&&(s="expressCheckout"===e?u:function(){u(P)}),T(P,"ready",s),c.useLayoutEffect(function(){if(null===S.current&&null!==O.current&&(w||E)){var t=null;if(E)switch(e){case"payment":t=E.createPaymentElement(o);break;case"address":if("mode"in o){var s=o.mode,n=A(o,X);if("shipping"===s)t=E.createShippingAddressElement(n);else if("billing"===s)t=E.createBillingAddressElement(n);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":t=E.createExpressCheckoutElement(o);break;case"currencySelector":t=E.createCurrencySelectorElement();break;default:throw Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else w&&(t=w.create(e,o));S.current=t,C(t),t&&t.mount(O.current)}},[w,E,o]);var k=I(o);return c.useEffect(function(){if(S.current){var e=z(o,k,["paymentRequest"]);e&&"update"in S.current&&S.current.update(e)}},[o,k]),c.useLayoutEffect(function(){return function(){if(S.current&&"function"==typeof S.current.destroy)try{S.current.destroy(),S.current=null}catch(e){}}},[]),c.createElement("div",{id:n,className:a,ref:O})};return s.propTypes={id:N.string,className:N.string,onChange:N.func,onBlur:N.func,onFocus:N.func,onReady:N.func,onEscape:N.func,onClick:N.func,onLoadError:N.func,onLoaderStart:N.func,onNetworksChange:N.func,onConfirm:N.func,onCancel:N.func,onShippingAddressChange:N.func,onShippingRateChange:N.func,options:N.object},s.displayName=r,s.__elementType=e,s},J="undefined"==typeof window,Z=c.createContext(null);Z.displayName="EmbeddedCheckoutProviderContext";var ee=function(){return W("calls useStripe()").stripe};Q("auBankAccount",J);var et=Q("card",J);Q("cardNumber",J),Q("cardExpiry",J),Q("cardCvc",J),Q("fpxBank",J),Q("iban",J),Q("idealBank",J),Q("p24Bank",J),Q("epsBank",J),Q("payment",J),Q("expressCheckout",J),Q("currencySelector",J),Q("paymentRequestButton",J),Q("linkAuthentication",J),Q("address",J),Q("shippingAddress",J),Q("paymentMethodMessaging",J),Q("affirmMessage",J),Q("afterpayClearpayMessage",J);let er=({paymentSession:e,stripeKey:t,stripePromise:r,children:s})=>{let n={clientSecret:e.data?.client_secret};if(!t)throw Error("Stripe key is missing. Set NEXT_PUBLIC_STRIPE_KEY environment variable.");if(!r)throw Error("Stripe promise is missing. Make sure you have provided a valid Stripe key.");if(!e?.data?.client_secret)throw Error("Stripe client secret is missing. Cannot initialize Stripe.");return(0,o.jsx)(V,{options:n,stripe:r,children:s})};!function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"}(n||(n={})),function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"}(a||(a={})),function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"}(i||(i={}));var es=function(){return(es=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function en(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function ea(e,t,r){if(r||2==arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var ei="data-react-paypal-script-id",eo={DATA_CLIENT_TOKEN:"dataClientToken",DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_USER_ID_TOKEN:"dataUserIdToken"},el="3.117.0",ec="paypal";function ed(e){return void 0===e&&(e=ec),window[e]}function eu(e){var t=e.reactComponentName,r=e.sdkComponentKey,s=e.sdkRequestedComponents,n=void 0===s?"":s,a=e.sdkDataNamespace,i=r.charAt(0).toUpperCase().concat(r.substring(1)),o="Unable to render <".concat(t," /> because window.").concat(void 0===a?ec:a,".").concat(i," is undefined."),l="string"==typeof n?n:n.join(",");if(!l.includes(r)){var c=[l,r].filter(Boolean).join();o+="\nTo fix the issue, add '".concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(c,"'}}>`.")}return o}function ep(e){e[ei];var t=en(e,[ei+""]);return"react-paypal-js-".concat(function(e){for(var t="",r=0;r<e.length;r++){var s=e[r].charCodeAt(0)*r;e[r+1]&&(s+=e[r+1].charCodeAt(0)*(r-1)),t+=String.fromCharCode(97+Math.abs(s)%26)}return t}(JSON.stringify(t)))}function em(e,t){var r,s,i,o;switch(t.type){case a.LOADING_STATUS:if("object"==typeof t.value)return es(es({},e),{loadingStatus:t.value.state,loadingStatusErrorMessage:t.value.message});return es(es({},e),{loadingStatus:t.value});case a.RESET_OPTIONS:return i=e.options[ei],(null==(o=self.document.querySelector("script[".concat(ei,'="').concat(i,'"]')))?void 0:o.parentNode)&&o.parentNode.removeChild(o),es(es({},e),{loadingStatus:n.PENDING,options:es(es(((r={})[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,r),t.value),((s={})[ei]="".concat(ep(t.value)),s))});case a.SET_BRAINTREE_INSTANCE:return es(es({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var ef=(0,c.createContext)(null);function eh(e){if("function"==typeof(null==e?void 0:e.dispatch)&&0!==e.dispatch.length)return e;throw Error("usePayPalScriptReducer must be used within a PayPalScriptProvider")}var eg=function(e){var t,r;if(!(null==(t=null==e?void 0:e.options)?void 0:t[eo.DATA_CLIENT_TOKEN])&&!(null==(r=null==e?void 0:e.options)?void 0:r[eo.DATA_USER_ID_TOKEN]))throw Error("Invalid authorization data. Use dataClientToken or dataUserIdToken to authorize.");return e};function ex(){var e=eh((0,c.useContext)(ef));return[es(es({},e),{isInitial:e.loadingStatus===n.INITIAL,isPending:e.loadingStatus===n.PENDING,isResolved:e.loadingStatus===n.RESOLVED,isRejected:e.loadingStatus===n.REJECTED}),e.dispatch]}(0,c.createContext)({});var ev=function(e){var t,r,s=e.className,n=e.disabled,a=void 0!==n&&n,i=e.children,o=e.forceReRender,l=en(e,["className","disabled","children","forceReRender"]),u="".concat(void 0===s?"":s," ").concat(a?"paypal-buttons-disabled":"").trim(),p=(0,c.useRef)(null),m=(0,c.useRef)(null),f=((t=(0,c.useRef)(new Proxy({},{get:function(e,t,r){return"function"==typeof e[t]?function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return e[t].apply(e,r)}:Reflect.get(e,t,r)}}))).current=Object.assign(t.current,l),t.current),h=ex()[0],g=h.isResolved,x=h.options,v=(0,c.useState)(null),y=v[0],b=v[1],_=(0,c.useState)(!0),j=_[0],w=_[1],E=(0,c.useState)(null)[1];function N(){null!==m.current&&m.current.close().catch(function(){})}return(null==(r=m.current)?void 0:r.updateProps)&&m.current.updateProps({message:l.message}),(0,c.useEffect)(function(){if(!1===g)return N;var e=ed(x.dataNamespace);if(void 0===e||void 0===e.Buttons)return E(function(){throw Error(eu({reactComponentName:ev.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:x.components,sdkDataNamespace:x[eo.DATA_NAMESPACE]}))}),N;try{m.current=e.Buttons(es(es({},f),{onInit:function(e,t){b(t),"function"==typeof l.onInit&&l.onInit(e,t)}}))}catch(e){return E(function(){throw Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(e))})}return!1===m.current.isEligible()?w(!1):p.current&&m.current.render(p.current).catch(function(e){null!==p.current&&0!==p.current.children.length&&E(function(){throw Error("Failed to render <PayPalButtons /> component. ".concat(e))})}),N},ea(ea([g],void 0===o?[]:o,!0),[l.fundingSource],!1)),(0,c.useEffect)(function(){null!==y&&(!0===a?y.disable().catch(function(){}):y.enable().catch(function(){}))},[a,y]),d().createElement(d().Fragment,null,j?d().createElement("div",{ref:p,style:a?{opacity:.38}:{},className:u}):i)};function ey(e,t){void 0===t&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(e){r.setAttribute(e,t[e]),"data-csp-nonce"===e&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}ev.displayName="PayPalButtons","function"==typeof SuppressedError&&SuppressedError;function eb(e,t){if("object"!=typeof e||null===e)throw Error("Expected an options object.");var r=e.environment;if(r&&"production"!==r&&"sandbox"!==r)throw Error('The `environment` option must be either "production" or "sandbox".');if(void 0!==t&&"function"!=typeof t)throw Error("Expected PromisePonyfill to be a function.")}var e_=function(e){var t=e.className,r=e.children,s=en(e,["className","children"]),n=ex()[0],a=n.isResolved,i=n.options,o=(0,c.useRef)(null),l=(0,c.useState)(!0),u=l[0],p=l[1],m=(0,c.useState)(null)[1],f=function(e){var t=o.current;if(!t||!e.isEligible())return p(!1);t.firstChild&&t.removeChild(t.firstChild),e.render(t).catch(function(e){null!==t&&0!==t.children.length&&m(function(){throw Error("Failed to render <PayPalMarks /> component. ".concat(e))})})};return(0,c.useEffect)(function(){if(!1!==a){var e=ed(i[eo.DATA_NAMESPACE]);if(void 0===e||void 0===e.Marks)return m(function(){throw Error(eu({reactComponentName:e_.displayName,sdkComponentKey:"marks",sdkRequestedComponents:i.components,sdkDataNamespace:i[eo.DATA_NAMESPACE]}))});f(e.Marks(es({},s)))}},[a,s.fundingSource]),d().createElement(d().Fragment,null,u?d().createElement("div",{ref:o,className:void 0===t?"":t}):r)};e_.displayName="PayPalMarks";var ej=function(e){var t=e.className,r=e.forceReRender,s=en(e,["className","forceReRender"]),n=ex()[0],a=n.isResolved,i=n.options,o=(0,c.useRef)(null),l=(0,c.useRef)(null),u=(0,c.useState)(null)[1];return(0,c.useEffect)(function(){if(!1!==a){var e=ed(i[eo.DATA_NAMESPACE]);if(void 0===e||void 0===e.Messages)return u(function(){throw Error(eu({reactComponentName:ej.displayName,sdkComponentKey:"messages",sdkRequestedComponents:i.components,sdkDataNamespace:i[eo.DATA_NAMESPACE]}))});l.current=e.Messages(es({},s)),l.current.render(o.current).catch(function(e){null!==o.current&&0!==o.current.children.length&&u(function(){throw Error("Failed to render <PayPalMessages /> component. ".concat(e))})})}},ea([a],void 0===r?[]:r,!0)),d().createElement("div",{ref:o,className:void 0===t?"":t})};ej.displayName="PayPalMessages";var ew=function(e){var t,r=e.options,s=void 0===r?{clientId:"test"}:r,i=e.children,o=e.deferLoading,l=void 0!==o&&o,u=(0,c.useReducer)(em,{options:es(es({},s),((t={})[eo.DATA_JS_SDK_LIBRARY]=eo.DATA_LIBRARY_VALUE,t[eo.DATA_SDK_INTEGRATION_SOURCE]=eo.DATA_LIBRARY_VALUE,t[ei]="".concat(ep(s)),t)),loadingStatus:l?n.INITIAL:n.PENDING}),p=u[0],m=u[1];return(0,c.useEffect)(function(){if(!1===l&&p.loadingStatus===n.INITIAL)return m({type:a.LOADING_STATUS,value:n.PENDING});if(p.loadingStatus===n.PENDING){var e=!0;return(function(e,t){if(void 0===t&&(t=Promise),eb(e,t),"undefined"==typeof document)return t.resolve(null);var r,s,n,a,i,o,l,c,d,u,p=(a=e.sdkBaseUrl,i=e.environment,o=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)0>t.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}(e,["sdkBaseUrl","environment"]),l=a||("sandbox"===i?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"),d=(c=Object.keys(o).filter(function(e){return void 0!==o[e]&&null!==o[e]&&""!==o[e]}).reduce(function(e,t){var r=o[t].toString();return"data"===(t=t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})).substring(0,4)||"crossorigin"===t?e.attributes[t]=r:e.queryParams[t]=r,e},{queryParams:{},attributes:{}})).queryParams,u=c.attributes,d["merchant-id"]&&-1!==d["merchant-id"].indexOf(",")&&(u["data-merchant-id"]=d["merchant-id"],d["merchant-id"]="*"),{url:"".concat(l,"?").concat((s="",Object.keys(r=d).forEach(function(e){0!==s.length&&(s+="&"),s+=e+"="+r[e]}),s)),attributes:u}),m=p.url,f=p.attributes,h=f["data-namespace"]||"paypal",g=(n=h,window[n]);return(f["data-js-sdk-library"]||(f["data-js-sdk-library"]="paypal-js"),function(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(null===r)return null;var s=ey(e,t),n=r.cloneNode();if(delete n.dataset.uidAuto,Object.keys(n.dataset).length!==Object.keys(s.dataset).length)return null;var a=!0;return Object.keys(n.dataset).forEach(function(e){n.dataset[e]!==s.dataset[e]&&(a=!1)}),a?r:null}(m,f)&&g)?t.resolve(g):(function(e,t){void 0===t&&(t=Promise),eb(e,t);var r=e.url,s=e.attributes;if("string"!=typeof r||0===r.length)throw Error("Invalid url.");if(void 0!==s&&"object"!=typeof s)throw Error("Expected attributes to be an object.");return new t(function(e,t){var n,a,i,o,l,c;if("undefined"==typeof document)return e();a=(n={url:r,attributes:s,onSuccess:function(){return e()},onError:function(){return t(Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.')))}}).url,i=n.attributes,o=n.onSuccess,l=n.onError,(c=ey(a,i)).onerror=l,c.onload=o,document.head.insertBefore(c,document.head.firstElementChild)})})({url:m,attributes:f},t).then(function(){var e,t=(e=h,window[e]);if(t)return t;throw Error("The window.".concat(h," global variable is not available."))})})(p.options).then(function(){e&&m({type:a.LOADING_STATUS,value:n.RESOLVED})}).catch(function(t){console.error("".concat("Failed to load the PayPal JS SDK script."," ").concat(t)),e&&m({type:a.LOADING_STATUS,value:{state:n.REJECTED,message:String(t)}})}),function(){e=!1}}},[p.options,l,p.loadingStatus]),d().createElement(ef.Provider,{value:es(es({},p),{dispatch:m})},i)},eE=function(e){if(!e.includes(i.NUMBER)||!e.includes(i.CVV)||!e.includes(i.EXPIRATION_DATE)&&!e.includes(i.EXPIRATION_MONTH)&&!e.includes(i.EXPIRATION_YEAR))throw Error("To use HostedFields you must use it with at least 3 children with types: [number, cvv, expirationDate] includes")},eN=function(e){if(e.length!==new Set(e).size)throw Error("Cannot use duplicate HostedFields as children")};function eP(){}var eC=(0,c.createContext)({cardFieldsForm:null,fields:{},registerField:eP,unregisterField:eP}),eS={IDEAL:"ideal",BANCONTACT:"bancontact",GIROPAY:"giropay",SOFORT:"sofort",EPS:"eps",MYBANK:"mybank",P24:"p24",PAYU:"payu",BLIK:"blik",TRUSTLY:"trustly",OXXO:"oxxo",BOLETO:"boleto",BOLETOBANCARIO:"boletobancario",WECHATPAY:"wechatpay",MERCADOPAGO:"mercadopago",MULTIBANCO:"multibanco",SATISPAY:"satispay",PAIDY:"paidy",ZIMPLER:"zimpler",MAXIMA:"maxima"};eS.IDEAL,eS.BANCONTACT,eS.GIROPAY,eS.SOFORT,eS.EPS,eS.MYBANK,eS.P24,eS.PAYU,eS.BLIK,eS.TRUSTLY,eS.OXXO,eS.BOLETO,eS.BOLETOBANCARIO,eS.WECHATPAY,eS.MERCADOPAGO,eS.MULTIBANCO,eS.SATISPAY,eS.PAIDY,eS.MAXIMA,eS.ZIMPLER;var eO=Object.defineProperty,eA=Object.getOwnPropertySymbols,eR=Object.prototype.hasOwnProperty,ek=Object.prototype.propertyIsEnumerable,eT=(e,t,r)=>t in e?eO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eI=(e,t)=>{for(var r in t||(t={}))eR.call(t,r)&&eT(e,r,t[r]);if(eA)for(var r of eA(t))ek.call(t,r)&&eT(e,r,t[r]);return e},eL=(e,t)=>{var r={};for(var s in e)eR.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&eA)for(var s of eA(e))0>t.indexOf(s)&&ek.call(e,s)&&(r[s]=e[s]);return r};let eD=c.forwardRef((e,t)=>{var{color:r="currentColor"}=e,s=eL(e,["color"]);return c.createElement("svg",eI({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},s),c.createElement("g",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},c.createElement("path",{d:"M1.056 5.944h12.888M2.833 12.167h9.334c.982 0 1.777-.796 1.777-1.778V4.61c0-.982-.796-1.778-1.777-1.778H2.833c-.981 0-1.777.796-1.777 1.778v5.778c0 .982.796 1.778 1.777 1.778M3.278 9.5h2.666M10.833 9.5h.89"})),c.createElement("defs",null,c.createElement("clipPath",{id:"a"},c.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});eD.displayName="CreditCard";let eF={pp_stripe_stripe:{title:"Credit card",icon:(0,o.jsx)(eD,{})},"pp_stripe-ideal_stripe":{title:"iDeal",icon:(0,o.jsx)(({color:e="currentColor",...t})=>(0,o.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:e,...t,children:[(0,o.jsx)("title",{children:"iDEAL icon"}),(0,o.jsx)("path",{d:"M.975 2.61v18.782h11.411c6.89 0 10.64-3.21 10.64-9.415 0-6.377-4.064-9.367-10.64-9.367H.975zm11.411-.975C22.491 1.635 24 8.115 24 11.977c0 6.7-4.124 10.39-11.614 10.39H0V1.635h12.386z M2.506 13.357h3.653v6.503H2.506z M6.602 10.082a2.27 2.27 0 1 1-4.54 0 2.27 2.27 0 0 1 4.54 0m1.396-1.057v2.12h.65c.45 0 .867-.13.867-1.077 0-.924-.463-1.043-.867-1.043h-.65zm10.85-1.054h1.053v3.174h1.56c-.428-5.758-4.958-7.002-9.074-7.002H7.999v3.83h.65c1.183 0 1.92.803 1.92 2.095 0 1.333-.719 2.129-1.92 2.129h-.65v7.665h4.388c6.692 0 9.021-3.107 9.103-7.665h-2.64V7.97zm-2.93 2.358h.76l-.348-1.195h-.063l-.35 1.195zm-1.643 1.87l1.274-4.228h1.497l1.274 4.227h-1.095l-.239-.818H15.61l-.24.818h-1.095zm-.505-1.054v1.052h-2.603V7.973h2.519v1.052h-1.467v.49h1.387v1.05H12.22v.58h1.55z"})]}),{})},"pp_stripe-bancontact_stripe":{title:"Bancontact",icon:(0,o.jsx)(({color:e="currentColor",...t})=>(0,o.jsxs)("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:e,...t,children:[(0,o.jsx)("title",{children:"Bancontact icon"}),(0,o.jsx)("path",{d:"M21.385 9.768h-7.074l-4.293 5.022H1.557L3.84 12.1H1.122C.505 12.1 0 12.616 0 13.25v2.428c0 .633.505 1.15 1.122 1.15h12.933c.617 0 1.46-.384 1.874-.854l1.956-2.225 3.469-3.946.031-.035zm-1.123 1.279l-.751.855.75-.855zm2.616-3.875H9.982c-.617 0-1.462.384-1.876.853l-5.49 6.208h7.047l4.368-5.02h8.424l-2.263 2.689h2.686c.617 0 1.122-.518 1.122-1.151V8.323c0-.633-.505-1.15-1.122-1.15zm-1.87 3.024l-.374.427-.1.114.474-.54z"})]}),{})},pp_paypal_paypal:{title:"PayPal",icon:(0,o.jsx)(()=>(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",width:"20",viewBox:"0 0 26 25",id:"paypalIcon",children:[(0,o.jsx)("path",{fill:"none",stroke:"#303c42",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6.9 20.5H2c-.6 0-.5-.1-.5-.5s2.9-18 3-18.5.5-1 1-1h10c2.8 0 5 2.2 5 5h0c0 4.4-3.6 8-8 8H7.9"}),(0,o.jsx)("path",{fill:"none",stroke:"#303c42",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M7 23.5c-.3 0-.5-.2-.5-.5 0 0 0 0 0 0 0-.3 2.4-16 2.5-16.5s.3-1 1-1h7.5c2.8 0 5 2.2 5 5h0c0 3.9-3.1 7-7 7h-2l-1 6H7z"})]}),{})},pp_system_default:{title:"Manual Payment",icon:(0,o.jsx)(eD,{})}},ez=e=>e?.startsWith("pp_stripe_"),eM=e=>e?.startsWith("pp_paypal"),eB=e=>e?.startsWith("pp_system_default"),eU=(0,c.createContext)(!1),e$="sk_test_ab833e3b0c0022e2ffd47011652a7e0031d44130e9bfa6c2",eK=e$?function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];w=!0;var s=Date.now();return E().then(function(e){return j(e,t,s)})}(e$):null,eY=(0,l.R)(({children:e,cart:t})=>{let r=t.payment_collection?.payment_sessions?.find(e=>"pending"===e.status);return ez(r?.provider_id)&&r&&eK?(0,o.jsx)(eU.Provider,{value:!0,children:(0,o.jsx)(er,{paymentSession:r,stripeKey:e$,stripePromise:eK,children:e})}):eM(r?.provider_id)&&t?(0,o.jsx)(ew,{options:{clientId:"test",currency:t?.currency_code.toUpperCase(),intent:"authorize",components:"buttons"},children:e}):(0,o.jsx)("div",{children:e})});var eV=r(81010),eH=r(10567),eq=r(39994),eG=r(20808),eW=r(62920),eX=r(13984),eQ=r(54404),eJ=r(87491),eZ=r(22632),e0=r(23678),e1=r(15949),e2=r(36223);let e5=eH.z.object({email:eH.z.string().min(3).email("Enter a valid email address.")}),e8=({countryCode:e,cart:t})=>{let r=(0,u.useSearchParams)(),s=(0,u.useRouter)(),n=(0,u.usePathname)(),{data:a,isPending:i}=(0,e1.cN)(),l="email"===r.get("step"),{mutate:c,isPending:d,data:p}=(0,e2.U9)(),m=t=>{c({...t,country_code:e},{onSuccess:e=>{l&&e?.success&&s.push(n+"?step=delivery",{scroll:!1})}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex justify-between mb-6 md:mb-8",children:[(0,o.jsxs)("div",{className:"flex justify-between flex-wrap gap-5 flex-1",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:(0,eV.Id)("transition-fontWeight duration-75",l&&"font-semibold"),children:"1. Email"})}),l&&!a&&!i&&(0,o.jsx)("div",{className:"text-grayscale-500",children:(0,o.jsxs)("p",{children:["Already have an account? No worries, just"," ",(0,o.jsxs)(eX.UiDialogTrigger,{children:[(0,o.jsx)(eG.Button,{variant:"link",children:"log in."}),(0,o.jsx)(eQ.UiModalOverlay,{children:(0,o.jsx)(eQ.UiModal,{className:"relative max-w-108",children:(0,o.jsxs)(eX.UiDialog,{children:[(0,o.jsx)("p",{className:"text-md mb-10",children:"Log in"}),(0,o.jsx)(eZ.LoginForm,{redirectUrl:`/${e}/checkout?step=delivery`,handleCheckout:m}),(0,o.jsx)(eX.UiCloseButton,{variant:"ghost",className:"absolute top-4 right-6 p-0",children:(0,o.jsx)(eJ.I,{name:"close",className:"w-6 h-6"})})]})})})]})]})})]}),!l&&(0,o.jsx)(eG.Button,{variant:"link",onPress:()=>{s.push(n+"?step=email")},children:"Change"})]}),l?(0,o.jsx)(eW.lV,{schema:e5,onSubmit:m,formProps:{id:"email"},defaultValues:{email:t?.email||""},children:({watch:e})=>{let t=e("email");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eW.FO,{placeholder:"Email",name:"email",inputProps:{autoComplete:"email",title:"Enter a valid email address."},"data-testid":"shipping-email-input"}),(0,o.jsx)(eq.SubmitButton,{className:"mt-8",isLoading:d,isDisabled:!t,children:"Next"}),(0,o.jsx)(e0.A,{error:p?.error})]})}}):t?.email?(0,o.jsxs)("ul",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-34",children:[(0,o.jsx)("li",{className:"text-grayscale-500",children:"Email"}),(0,o.jsx)("li",{className:"text-grayscale-600 break-all",children:t.email})]}):null]})};var e4=r(17207),e3=r.n(e4),e6=r(27578),e7=r.n(e6);function e9(e,t){return e3()(e7()(e,["first_name","last_name","address_1","address_2","company","postal_code","city","country_code","province","phone"]),e7()(t,["first_name","last_name","address_1","address_2","company","postal_code","city","country_code","province","phone"]))}var te=r(63037),tt=r(2166),tr=r(31069),ts=r(18408),tn=r(3390);let ta=e=>!e?.billing_address?.first_name&&!e?.billing_address?.last_name&&!e?.billing_address?.address_1&&!e?.billing_address?.address_2&&!e?.billing_address?.company&&!e?.billing_address?.postal_code&&!e?.billing_address?.city&&!e?.billing_address?.country_code&&!e?.billing_address?.province&&!e?.billing_address?.phone,ti=({cart:e,customer:t})=>{let r=(0,ts.F)(),{setValue:s,watch:n}=(0,tn.xW)(),a=e=>{e&&s("billing_address",{first_name:e?.first_name||"",last_name:e?.last_name||"",address_1:e?.address_1||"",company:e?.company||"",postal_code:e?.postal_code||"",city:e?.city||"",country_code:e?.country_code||"",province:e?.province||"",phone:e?.phone||""})},i=n(),l=e=>{s(e.target.name,e.target.value)},d=(0,c.useMemo)(()=>e?.region?.countries?.map(e=>e.iso_2),[e?.region]),u=(0,c.useMemo)(()=>t?.addresses.filter(e=>e.country_code&&d?.includes(e.country_code)),[t?.addresses,d]);return(0,c.useEffect)(()=>{if(e){if(e.billing_address)a(e.billing_address);else if(t&&u&&u.length&&ta(i)){let e=u.find(e=>e.is_default_billing)||u[0];a({first_name:e.first_name??void 0,last_name:e.last_name??void 0,address_1:e.address_1??void 0,address_2:e.address_2??void 0,company:e.company??void 0,postal_code:e.postal_code??void 0,city:e.city??void 0,country_code:e.country_code??void 0,province:e.province??void 0,phone:e.phone??void 0})}}},[e,t,u]),(0,o.jsx)(o.Fragment,{children:t&&(u?.length||0)>0&&!ta(i)?(0,o.jsxs)("div",{className:"w-full border border-grayscale-200 rounded-xs p-4 flex flex-wrap gap-8 max-lg:flex-col mt-8",children:[(0,o.jsxs)("div",{className:"flex flex-1 gap-8",children:[(0,o.jsx)(eJ.I,{name:"user",className:"w-6 h-6 mt-2.5"}),(0,o.jsxs)("div",{className:"flex flex-col gap-8 flex-1",children:[(0,o.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Country"}),(0,o.jsx)("p",{children:e?.region?.countries?.find(e=>e.iso_2===i.billing_address?.country_code)?.display_name||i.billing_address?.country_code})]}),(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Address"}),(0,o.jsx)("p",{children:i.billing_address?.address_1})]})]}),i.billing_address?.address_2&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Apartment, suite, etc. (Optional)"}),(0,o.jsx)("p",{children:i.billing_address?.address_2})]}),(0,o.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Postal Code"}),(0,o.jsx)("p",{children:i.billing_address?.postal_code})]}),(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"City"}),(0,o.jsx)("p",{children:i.billing_address?.city})]})]})]})]}),(0,o.jsxs)(eX.UiDialogTrigger,{children:[(0,o.jsx)(eG.Button,{variant:"outline",size:"sm",className:"shrink-0",children:"Change"}),(0,o.jsx)(eQ.UiModalOverlay,{children:(0,o.jsx)(eQ.UiModal,{children:(0,o.jsxs)(eX.UiDialog,{children:[(0,o.jsx)("p",{className:"text-md mb-10",children:"Change address"}),(0,o.jsx)(te.z6,{className:"flex flex-col gap-4 mb-10","aria-label":"Shipping methods",onChange:e=>{let t=u?.find(t=>t.id===e);t&&a({address_1:t.address_1??void 0,address_2:t.address_2??void 0,city:t.city??void 0,company:t.company??void 0,country_code:t.country_code??void 0,first_name:t.first_name??void 0,last_name:t.last_name??void 0,phone:t.phone??void 0,postal_code:t.postal_code??void 0,province:t.province??void 0})},value:u?.find(e=>e9({first_name:e.first_name??"",last_name:e.last_name??"",address_1:e.address_1??"",address_2:e.address_2??"",company:e.company??"",postal_code:e.postal_code??"",city:e.city??"",country_code:e.country_code??"",province:e.province??"",phone:e.phone??""},{first_name:i.billing_address?.first_name,last_name:i.billing_address?.last_name,address_1:i.billing_address?.address_1,address_2:i.billing_address?.address_2,company:i.billing_address?.company,postal_code:i.billing_address?.postal_code,city:i.billing_address?.city,country_code:i.billing_address?.country_code,province:i.billing_address?.province,phone:i.billing_address?.phone}))?.id,children:u?.map(t=>(0,o.jsxs)(tt.wE,{variant:"outline",value:t.id,className:"gap-4",id:t.id,children:[(0,o.jsx)(tt.jC,{}),(0,o.jsx)(tt.KC,{children:[t.first_name,t.last_name].filter(Boolean).join(" ")}),(0,o.jsx)(tt.KC,{className:"ml-auto text-grayscale-500 group-data-[selected=true]:font-normal",children:[t.address_1,t.address_2,[t.postal_code,t.city].filter(Boolean).join(" "),e?.region?.countries?.find(e=>e.iso_2===t.country_code)?.display_name||t.country_code].filter(Boolean).join(", ")})]},t.id))}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)(eX.UiDialogTrigger,{children:[(0,o.jsx)(eG.Button,{children:"Add new address"}),(0,o.jsx)(eQ.UiModalOverlay,{children:(0,o.jsx)(eQ.UiModal,{children:(0,o.jsx)(eX.UiDialog,{children:(0,o.jsx)(tr.UpsertAddressForm,{region:e?.region,defaultValues:{country_code:r}})})})})]}),(0,o.jsx)(eX.UiCloseButton,{variant:"outline",children:"Close"})]})]})})})]})]}):(0,o.jsxs)("div",{className:(0,eV.QP)("grid grid-cols-2 gap-4 mt-8"),children:[(0,o.jsx)(eW.FO,{placeholder:"First name",name:"billing_address.first_name",inputProps:{autoComplete:"given-name"},"data-testid":"billing-first-name-input"}),(0,o.jsx)(eW.FO,{placeholder:"Last name",name:"billing_address.last_name",inputProps:{autoComplete:"family-name"},"data-testid":"billing-last-name-input"}),(0,o.jsx)(eW.FO,{placeholder:"Address",name:"billing_address.address_1",inputProps:{autoComplete:"address-line1"},"data-testid":"billing-address-input"}),(0,o.jsx)(eW.FO,{placeholder:"Company",name:"billing_address.company",inputProps:{autoComplete:"company"},"data-testid":"billing-company-input"}),(0,o.jsx)(eW.FO,{placeholder:"Postal code",name:"billing_address.postal_code",inputProps:{autoComplete:"postal-code"},"data-testid":"billing-postal-input"}),(0,o.jsx)(eW.FO,{placeholder:"City",name:"billing_address.city",inputProps:{autoComplete:"address-level2"},"data-testid":"billing-city-input"}),(0,o.jsx)(eW.nk,{name:"billing_address.country_code",selectProps:{autoComplete:"country",region:e?.region,selectedKey:i.billing_address?.country_code||null,onSelectionChange:e=>l({target:{name:"billing_address.country_code",value:`${e}`}})},"data-testid":"billing-country-select"}),(0,o.jsx)(eW.FO,{placeholder:"State / Province",name:"billing_address.province",inputProps:{autoComplete:"address-level1"},"data-testid":"billing-province-input"}),(0,o.jsx)(eW.FO,{placeholder:"Phone",name:"billing_address.phone",inputProps:{autoComplete:"tel"},"data-testid":"billing-phone-input"})]})})};var to=r(37204);let tl=e=>!e?.shipping_address?.first_name&&!e?.shipping_address?.last_name&&!e?.shipping_address?.address_1&&!e?.shipping_address?.address_2&&!e?.shipping_address?.company&&!e?.shipping_address?.postal_code&&!e?.shipping_address?.city&&!e?.shipping_address?.country_code&&!e?.shipping_address?.province&&!e?.shipping_address?.phone,tc=({customer:e,cart:t,checked:r,onChange:s})=>{let n=(0,ts.F)(),{setValue:a,control:i}=(0,tn.xW)(),l=(0,tn.FH)({control:i}),d=(0,c.useMemo)(()=>t?.region?.countries?.map(e=>e.iso_2),[t?.region]),u=(0,c.useMemo)(()=>e?.addresses.filter(e=>e.country_code&&d?.includes(e.country_code)),[e?.addresses,d]),p=e=>{e&&a("shipping_address",{first_name:e?.first_name||"",last_name:e?.last_name||"",address_1:e?.address_1||"",company:e?.company||"",postal_code:e?.postal_code||"",city:e?.city||"",country_code:e?.country_code||"",province:e?.province||"",phone:e?.phone||""})};(0,c.useEffect)(()=>{if(t){if(t.shipping_address)p(t.shipping_address);else if(e&&u&&u.length&&tl(l)){let e=u.find(e=>e.is_default_shipping)||u[0];p({first_name:e.first_name??void 0,last_name:e.last_name??void 0,address_1:e.address_1??void 0,address_2:e.address_2??void 0,company:e.company??void 0,postal_code:e.postal_code??void 0,city:e.city??void 0,country_code:e.country_code??void 0,province:e.province??void 0,phone:e.phone??void 0})}}},[t,e,u]);let m=e=>{a(e.target.name,e.target.value)};return(0,o.jsxs)(o.Fragment,{children:[e&&(u?.length||0)>0&&!tl(l)?(0,o.jsxs)("div",{className:"w-full border border-grayscale-200 rounded-xs p-4 flex flex-wrap gap-8 max-lg:flex-col mb-8",children:[(0,o.jsxs)("div",{className:"flex flex-1 gap-8",children:[(0,o.jsx)(eJ.I,{name:"user",className:"w-6 h-6 mt-2.5"}),(0,o.jsxs)("div",{className:"flex flex-col gap-8 flex-1",children:[(0,o.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Country"}),(0,o.jsx)("p",{children:t?.region?.countries?.find(e=>e.iso_2===l.shipping_address.country_code)?.display_name||l.shipping_address.country_code})]}),(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Address"}),(0,o.jsx)("p",{children:l.shipping_address.address_1})]})]}),l.shipping_address.address_2&&(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Apartment, suite, etc. (Optional)"}),(0,o.jsx)("p",{children:l.shipping_address.address_2})]}),(0,o.jsxs)("div",{className:"flex flex-wrap justify-between gap-6",children:[(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"Postal Code"}),(0,o.jsx)("p",{children:l.shipping_address.postal_code})]}),(0,o.jsxs)("div",{className:"grow basis-0",children:[(0,o.jsx)("p",{className:"text-xs text-grayscale-500 mb-1.5",children:"City"}),(0,o.jsx)("p",{children:l.shipping_address.city})]})]})]})]}),(0,o.jsxs)(eX.UiDialogTrigger,{children:[(0,o.jsx)(eG.Button,{variant:"outline",size:"sm",className:"shrink-0",children:"Change"}),(0,o.jsx)(eQ.UiModalOverlay,{children:(0,o.jsx)(eQ.UiModal,{children:(0,o.jsxs)(eX.UiDialog,{children:[(0,o.jsx)("p",{className:"text-md mb-10",children:"Change address"}),(0,o.jsx)(te.z6,{className:"flex flex-col gap-4 mb-10","aria-label":"Shipping methods",onChange:e=>{let t=u?.find(t=>t.id===e);t&&p({address_1:t.address_1??void 0,address_2:t.address_2??void 0,city:t.city??void 0,company:t.company??void 0,country_code:t.country_code??void 0,first_name:t.first_name??void 0,last_name:t.last_name??void 0,phone:t.phone??void 0,postal_code:t.postal_code??void 0,province:t.province??void 0})},value:u?.find(e=>e9({first_name:e.first_name??"",last_name:e.last_name??"",address_1:e.address_1??"",address_2:e.address_2??"",company:e.company??"",postal_code:e.postal_code??"",city:e.city??"",country_code:e.country_code??"",province:e.province??"",phone:e.phone??""},{first_name:l.shipping_address.first_name,last_name:l.shipping_address.last_name,address_1:l.shipping_address.address_1,address_2:l.shipping_address.address_2,company:l.shipping_address.company,postal_code:l.shipping_address.postal_code,city:l.shipping_address.city,country_code:l.shipping_address.country_code,province:l.shipping_address.province,phone:l.shipping_address.phone}))?.id,children:u?.map(e=>(0,o.jsxs)(tt.wE,{variant:"outline",value:e.id,className:"gap-4",id:e.id,children:[(0,o.jsx)(tt.jC,{}),(0,o.jsx)(tt.KC,{children:[e.first_name,e.last_name].filter(Boolean).join(" ")}),(0,o.jsx)(tt.KC,{className:"ml-auto text-grayscale-500 group-data-[selected=true]:font-normal",children:[e.address_1,e.address_2,[e.postal_code,e.city].filter(Boolean).join(" "),t?.region?.countries?.find(t=>t.iso_2===e.country_code)?.display_name||e.country_code].filter(Boolean).join(", ")})]},e.id))}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsxs)(eX.UiDialogTrigger,{children:[(0,o.jsx)(eG.Button,{children:"Add new address"}),(0,o.jsx)(eQ.UiModalOverlay,{children:(0,o.jsx)(eQ.UiModal,{children:(0,o.jsx)(eX.UiDialog,{children:(0,o.jsx)(tr.UpsertAddressForm,{region:t?.region,defaultValues:{country_code:n}})})})})]}),(0,o.jsx)(eX.UiCloseButton,{variant:"outline",children:"Close"})]})]})})})]})]}):(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,o.jsx)(eW.FO,{placeholder:"First name",name:"shipping_address.first_name",inputProps:{autoComplete:"given-name"},"data-testid":"shipping-first-name-input"}),(0,o.jsx)(eW.FO,{placeholder:"Last name",name:"shipping_address.last_name",inputProps:{autoComplete:"family-name"},"data-testid":"shipping-last-name-input"}),(0,o.jsx)(eW.FO,{placeholder:"Address",name:"shipping_address.address_1",inputProps:{autoComplete:"address-line1"},"data-testid":"shipping-address-input"}),(0,o.jsx)(eW.FO,{placeholder:"Company",name:"shipping_address.company",inputProps:{autoComplete:"organization"},"data-testid":"shipping-company-input"}),(0,o.jsx)(eW.FO,{placeholder:"Postal code",name:"shipping_address.postal_code",inputProps:{autoComplete:"postal-code"},"data-testid":"shipping-postal-code-input"}),(0,o.jsx)(eW.FO,{placeholder:"City",name:"shipping_address.city",inputProps:{autoComplete:"address-level2"},"data-testid":"shipping-city-input"}),(0,o.jsx)(eW.nk,{name:"shipping_address.country_code",selectProps:{autoComplete:"country",region:t?.region,selectedKey:l["shipping_address.country_code"]||null,onSelectionChange:e=>{m({target:{name:"shipping_address.country_code",value:`${e}`}})}},"data-testid":"shipping-country-select"}),(0,o.jsx)(eW.FO,{placeholder:"State / Province",name:"shipping_address.province",inputProps:{autoComplete:"address-level1"},"data-testid":"shipping-province-input"}),(0,o.jsx)(eW.FO,{placeholder:"Phone",name:"shipping_address.phone",inputProps:{autoComplete:"tel"},"data-testid":"shipping-phone-input"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"hidden",name:"same_as_billing",value:r?"on":"off"}),(0,o.jsxs)(to.Y6,{name:"same_as_billing",isSelected:r,onChange:()=>{a("same_as_billing",r?"off":"on"),s()},"data-testid":"billing-address-checkbox",children:[(0,o.jsx)(to.x1,{children:(0,o.jsx)(to.Fr,{})}),(0,o.jsx)(to.cT,{children:"Billing address same as shipping address"})]})]})]})},td=eH.z.object({shipping_address:eH.z.object({first_name:eH.z.string().min(1),last_name:eH.z.string().min(1),company:eH.z.string().optional(),address_1:eH.z.string().min(1),address_2:eH.z.string().optional(),city:eH.z.string().min(1),postal_code:eH.z.string().min(1),province:eH.z.string().optional(),country_code:eH.z.string().min(2),phone:eH.z.string().optional()})}).and(eH.z.discriminatedUnion("same_as_billing",[eH.z.object({same_as_billing:eH.z.literal("on")}),eH.z.object({same_as_billing:eH.z.literal("off").optional(),billing_address:eH.z.object({first_name:eH.z.string().min(1),last_name:eH.z.string().min(1),company:eH.z.string().optional(),address_1:eH.z.string().min(1),address_2:eH.z.string().optional(),city:eH.z.string().min(1),postal_code:eH.z.string().min(1),province:eH.z.string().optional(),country_code:eH.z.string().min(2),phone:eH.z.string().optional()})})])),tu=({cart:e})=>{let t=(0,u.useSearchParams)(),r=(0,u.useRouter)(),s=(0,u.usePathname)(),n="delivery"===t.get("step"),[a,i]=c.useState(!0),{data:l}=(0,e1.cN)();c.useEffect(()=>{e?.shipping_address&&e?.billing_address&&i(e9(e.shipping_address,e.billing_address))},[e?.billing_address,e?.shipping_address]);let d=c.useCallback(()=>{i(e=>!e)},[i]),{mutate:p,isPending:m,data:f}=(0,e2.SP)();return e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex justify-between mb-6 md:mb-8 border-t border-grayscale-200 pt-8 mt-8",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:(0,eV.Id)("transition-fontWeight duration-75",n&&"font-semibold"),children:"2. Delivery details"})}),!n&&e?.shipping_address&&(0,o.jsx)(eG.Button,{variant:"link",onPress:()=>{r.push(s+"?step=delivery")},children:"Change"})]}),n?(0,o.jsx)(eW.lV,{schema:td,onSubmit:e=>{p(e,{onSuccess:e=>{n&&e.success&&r.push(s+"?step=shipping",{scroll:!1})}})},formProps:{id:"email"},defaultValues:a?{shipping_address:e?.shipping_address||{first_name:"",last_name:"",company:"",province:"",city:"",postal_code:"",country_code:"",address_1:"",address_2:"",phone:""},same_as_billing:"on"}:{shipping_address:e?.shipping_address||{first_name:"",last_name:"",company:"",province:"",city:"",postal_code:"",country_code:"",address_1:"",address_2:"",phone:""},same_as_billing:"off",billing_address:e?.billing_address||{first_name:"",last_name:"",company:"",province:"",city:"",postal_code:"",country_code:"",address_1:"",address_2:"",phone:""}},children:({watch:t})=>{let r=t("shipping_address"),s=!l?.addresses?.length&&!Object.values(r).some(e=>e);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tc,{customer:l||null,checked:a,onChange:d,cart:e}),!a&&(0,o.jsx)(ti,{cart:e,customer:l||null}),(0,o.jsx)(eq.SubmitButton,{className:"mt-8",isLoading:m,isDisabled:s,children:"Next"}),(0,o.jsx)(e0.A,{error:f?.error})]})}}):e?.shipping_address?(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsxs)("div",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-12",children:[(0,o.jsx)("div",{className:"text-grayscale-500",children:"Shipping address"}),(0,o.jsxs)("div",{className:"text-grayscale-600",children:[[e.shipping_address.first_name,e.shipping_address.last_name].filter(Boolean).join(" "),(0,o.jsx)("br",{}),[e.shipping_address.address_1,e.shipping_address.address_2].filter(Boolean).join(" "),(0,o.jsx)("br",{}),[e.shipping_address.postal_code,e.shipping_address.city].filter(Boolean).join(" "),(0,o.jsx)("br",{}),e.shipping_address.country_code?.toUpperCase(),(0,o.jsx)("br",{}),e.shipping_address.phone]})]}),a||e.billing_address?(0,o.jsxs)("div",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-17",children:[(0,o.jsx)("div",{className:"text-grayscale-500",children:"Billing address"}),(0,o.jsx)("div",{className:"text-grayscale-600",children:a?"Same as shipping address":(0,o.jsxs)(o.Fragment,{children:[[e.billing_address?.first_name,e.billing_address?.last_name].filter(Boolean).join(" "),(0,o.jsx)("br",{}),[e.billing_address?.address_1,e.billing_address?.address_2].filter(Boolean).join(" "),(0,o.jsx)("br",{}),[e.billing_address?.postal_code,e.billing_address?.city].filter(Boolean).join(" "),(0,o.jsx)("br",{}),e.billing_address?.country_code?.toUpperCase()]})})]}):null]}):null]}):null};var tp=r(73700);let tm=({cart:e})=>{let[t,r]=(0,c.useState)(null),s=(0,u.useSearchParams)(),n=(0,u.useRouter)(),a=(0,u.usePathname)(),i="shipping"===s.get("step"),{data:l}=(0,e2._j)(e.id),{mutate:d,isPending:p}=(0,e2.L_)({cartId:e.id}),m=l?.find(t=>t.id===e.shipping_methods?.[0]?.shipping_option_id);return(0,c.useEffect)(()=>{r(null)},[i]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex justify-between mb-6 md:mb-8 border-t border-grayscale-200 pt-8 mt-8",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:(0,eV.Id)("transition-fontWeight duration-75",i&&"font-semibold"),children:"3. Shipping"})}),!i&&e?.shipping_address&&e?.billing_address&&e?.email&&(0,o.jsx)(eG.Button,{variant:"link",onPress:()=>{n.push(a+"?step=shipping",{scroll:!1})},children:"Change"})]}),i?l?.length===0?(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:"text-red-900",children:"There are no shipping methods available for your location. Please contact us for further assistance."})}):(0,o.jsxs)("div",{children:[(0,o.jsx)(tt.UiRadioGroup,{className:"flex flex-col gap-4 mb-8",value:m?.id,onChange:e=>{d({shippingMethodId:e},{onError:e=>r(e.message)})},"aria-label":"Shipping methods",children:l?.map(t=>(0,o.jsxs)(tt.wE,{variant:"outline",value:t.id,className:"gap-4",children:[(0,o.jsx)(tt.jC,{}),(0,o.jsx)(tt.KC,{children:t.name}),(0,o.jsx)(tt.KC,{className:"ml-auto group-data-[selected=true]:font-normal",children:(0,tp.$)({amount:t.amount,currency_code:e?.currency_code})})]},t.id))}),(0,o.jsx)(e0.A,{error:t}),(0,o.jsx)(eG.Button,{onPress:()=>{n.push(a+"?step=payment",{scroll:!1})},isLoading:p,isDisabled:!e.shipping_methods?.[0],children:"Next"})]}):e&&(e.shipping_methods?.length??0)>0&&m?(0,o.jsxs)("ul",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-28",children:[(0,o.jsx)("li",{className:"text-grayscale-500",children:"Shipping"}),(0,o.jsx)("li",{className:"text-grayscale-600",children:m.name})]}):null]})};var tf=r(96673),th=r.n(tf);let tg=({paymentProviderId:e,paymentInfoMap:t,disabled:r=!1})=>(0,o.jsxs)(tt.wE,{variant:"outline",value:e,isDisabled:r,className:"gap-4",children:[(0,o.jsx)(tt.jC,{}),(0,o.jsxs)(tt.KC,{children:[t[e]?.title||e,eB(e)&&!1]}),(0,o.jsx)("span",{className:"ml-auto group-data-[selected=true]:font-normal",children:t[e]?.icon})]},e),tx=({cart:e,isLoading:t,setIsLoading:r,cardComplete:s,createQueryString:n,setError:a})=>{var i;let l=ee(),d=(i="calls useElements()",Y(c.useContext(K),i)).elements,p=d?.getElement("card"),m=(0,u.useRouter)(),f=(0,e2.Ti)(),h=e.payment_collection?.payment_sessions?.find(e=>"pending"===e.status),g=(0,u.usePathname)(),x=(0,e2.Zs)(),v=async()=>{r(!0);try{let t=!h;if(ez(h?.provider_id)||await x.mutateAsync({providerId:"stripe"}),!t){if(p){let t=await l?.createToken(p,{name:e.billing_address?.first_name+" "+e.billing_address?.last_name,address_line1:e.billing_address?.address_1??void 0,address_line2:e.billing_address?.address_2??void 0,address_city:e.billing_address?.city??void 0,address_country:e.billing_address?.country_code??void 0,address_zip:e.billing_address?.postal_code??void 0,address_state:e.billing_address?.province??void 0});t&&await f.mutateAsync({sessionId:h.id,token:t.token?.id})}return m.push(g+"?"+n("step","review"),{scroll:!1})}}catch(e){a(e instanceof Error?e.message:`${e}`)}finally{r(!1)}};return(0,o.jsx)(eG.Button,{className:"mt-6",onPress:v,isLoading:t,isDisabled:!s,"data-testid":"submit-payment-button",children:h?"Continue to review":"Enter card details"})},tv=({isLoading:e,setIsLoading:t,createQueryString:r,selectedPaymentMethod:s,setError:n})=>{let a=(0,u.useRouter)(),i=(0,u.usePathname)(),l=(0,e2.Zs)();return(0,o.jsx)(eG.Button,{className:"mt-6",onPress:()=>{t(!0),l.mutate({providerId:s},{onSuccess:()=>{if(!ez(s))return a.push(i+"?"+r("step","review"),{scroll:!1});t(!1)},onError:e=>{n(e instanceof Error?e.message:`${e}`),t(!1)}})},isLoading:e,"data-testid":"submit-payment-button",isDisabled:!s,children:ez(s)?"Enter card details":"Continue to review"})},ty=(0,l.R)(({cart:e,isLoading:t,setIsLoading:r,cardComplete:s,createQueryString:n,selectedPaymentMethod:a,setError:i})=>{let l=e.payment_collection?.payment_sessions?.find(e=>"pending"===e.status);return ez(l?.provider_id)&&ez(a)?(0,o.jsx)(tx,{setError:i,cart:e,isLoading:t,setIsLoading:r,cardComplete:s,createQueryString:n}):(0,o.jsx)(tv,{setError:i,cart:e,isLoading:t,setIsLoading:r,createQueryString:n,selectedPaymentMethod:a})}),tb=({cart:e})=>{let[t,r]=(0,c.useState)(!1),[s,n]=(0,c.useState)(null),[a,i]=(0,c.useState)(null),[l,d]=(0,c.useState)(!1),p=(0,u.useSearchParams)(),m=(0,u.useRouter)(),f=(0,u.usePathname)(),h="payment"===p.get("step"),g=(0,c.useMemo)(()=>({style:{base:{fontFamily:"Inter, sans-serif",color:"#050505","::placeholder":{color:"#808080"},fontSize:"16px"}},classes:{base:"pt-[18px] pb-1 block w-full h-14.5 px-4 mt-0 border rounded-xs appearance-none focus:outline-none focus:ring-0 border-grayscale-200 hover:border-grayscale-500 focus:border-grayscale-500 transition-all ease-in-out"}}),[]),x=(0,c.useCallback)((e,t)=>{let r=new URLSearchParams(p);return r.set(e,t),r.toString()},[p]);(0,c.useEffect)(()=>{n(null)},[h]);let v=(0,e2.Ti)(),y=e?.payment_collection?.payment_sessions?.find(e=>"pending"===e.status),[b,_]=(0,c.useState)(y?.provider_id??""),{data:j}=(0,e2._9)(e?.region?.id??""),w=ez(y?.provider_id),E=(0,c.useContext)(eU),N=y?.data?.payment_method_id,{data:P}=(0,e2.nc)(N),C=y&&e?.shipping_methods&&e?.shipping_methods.length!==0,S=(0,c.useCallback)(()=>{if(y?.id)try{v.mutate({sessionId:y.id,token:null},{onSuccess:()=>{i(null),d(!1)},onError:()=>n("Failed to remove card")})}catch(e){n("Failed to remove card")}},[y?.id,v]);return((0,c.useEffect)(()=>{P&&(i(th()(P?.card?.brand)),d(!0))},[P]),e)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex justify-between mb-6 md:mb-8 border-t border-grayscale-200 pt-8 mt-8",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:(0,eV.Id)("transition-fontWeight duration-75",h&&"font-semibold"),children:"4. Payment"})}),!h&&C&&(0,o.jsx)(eG.Button,{variant:"link",onPress:()=>{m.push(f+"?"+x("step","payment"),{scroll:!1})},children:"Change"})]}),(0,o.jsxs)("div",{className:h?"block":"hidden",children:[j?.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(tt.UiRadioGroup,{value:b,onChange:_,"aria-label":"Payment methods",children:j.sort((e,t)=>e.id>t.id?1:-1).map(e=>(0,o.jsx)(tg,{paymentInfoMap:eF,paymentProviderId:e.id},e.id))}),w&&E&&(0,o.jsx)("div",{className:"mt-5",children:ez(b)&&(P?.card?.brand?(0,o.jsx)(eW.Input,{value:"**** **** **** "+P?.card.last4,placeholder:"Card number",disabled:!0}):(0,o.jsx)(et,{options:g,onChange:e=>{i(e.brand&&e.brand.charAt(0).toUpperCase()+e.brand.slice(1)),n(e.error?.message||null),d(e.complete)}}))})]}),(0,o.jsx)(e0.A,{error:s,"data-testid":"payment-method-error-message"}),P&&ez(b)&&(0,o.jsx)(eG.Button,{className:"mt-6 mr-6",onPress:S,isLoading:t,isDisabled:!l,"data-testid":"submit-payment-button",children:"Change card"}),(0,o.jsx)(ty,{setError:n,isLoading:t,setIsLoading:r,selectedPaymentMethod:b,createQueryString:x,cart:e,cardComplete:l})]}),(0,o.jsx)("div",{className:h?"hidden":"block",children:e&&C&&y?(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsxs)("div",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-12",children:[(0,o.jsx)("div",{className:"text-grayscale-500",children:"Payment method"}),(0,o.jsx)("div",{className:"text-grayscale-600",children:eF[b]?.title||b})]}),(0,o.jsxs)("div",{className:"flex max-sm:flex-col flex-wrap gap-y-2 gap-x-14.5",children:[(0,o.jsx)("div",{className:"text-grayscale-500",children:"Payment details"}),ez(b)&&a?(0,o.jsxs)("div",{className:"text-grayscale-600 flex items-center gap-2",children:[eF[b]?.icon||(0,o.jsx)(eD,{}),(0,o.jsx)("p",{children:a})]}):(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:"Please enter card details"})})]})]}):null})]}):null},t_=({size:e="16",color:t="currentColor",...r})=>(0,o.jsxs)("svg",{className:"animate-spin",width:e,height:e,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...r,children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:t,strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:t,d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),tj=({cart:e,notReady:t})=>{let[r,s]=(0,c.useState)(!1),[n,a]=(0,c.useState)(null),i=(0,e2.VE)(),l=(0,u.useRouter)(),d=()=>{i.mutate(null,{onSuccess:e=>{if(e?.type==="order"){let t=e.order.shipping_address?.country_code?.toLowerCase();l.push(`/${t}/order/confirmed/${e.order.id}`)}else e?.error&&a(e.error.message);s(!1)},onError:e=>{a(e.message),s(!1)}})},p=ee(),m=e.payment_collection?.payment_sessions?.find(e=>"pending"===e.status),f=!(p&&m?.data?.payment_method_id),h=async()=>{if(s(!0),!p)return void s(!1);let e=m?.data?.payment_method_id;await p.confirmCardPayment(m?.data.client_secret,{payment_method:e}).then(({error:e,paymentIntent:t})=>{if(e){let t=e.payment_intent;(t&&"requires_capture"===t.status||t&&"succeeded"===t.status)&&d(),a(e.message||null);return}if(t&&"requires_capture"===t.status||"succeeded"===t.status)return d()})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eG.Button,{isDisabled:f||t,onPress:h,isLoading:r,className:"w-full",children:"Place order"}),(0,o.jsx)(e0.A,{error:n})]})},tw=({cart:e,notReady:t})=>{let[r,s]=(0,c.useState)(!1),[n,a]=(0,c.useState)(null),i=(0,u.useRouter)(),l=(0,e2.VE)(),d=()=>{l.mutate(null,{onSuccess:e=>{if(e?.type==="order"){let t=e.order.shipping_address?.country_code?.toLowerCase();i.push(`/${t}/order/confirmed/${e.order.id}`)}else e?.error&&a(e.error.message);s(!1)},onError:e=>{a(e.message),s(!1)}})},p=e.payment_collection?.payment_sessions?.find(e=>"pending"===e.status),m=async(e,t)=>{t?.order?.authorize().then(e=>{if("COMPLETED"!==e.status)return void a(`An error occurred, status: ${e.status}`);d()}).catch(()=>{a("An unknown error occurred, please try again."),s(!1)})},[{isPending:f,isResolved:h}]=ex();return f?(0,o.jsx)(t_,{}):h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ev,{style:{layout:"horizontal"},createOrder:async()=>p?.data.id,onApprove:m,disabled:t||r||f}),(0,o.jsx)(e0.A,{error:n})]}):void 0},tE=({notReady:e})=>{let[t,r]=(0,c.useState)(null),s=(0,e2.VE)(),n=(0,u.useRouter)(),a=()=>{s.mutate(null,{onSuccess:e=>{if(e?.type==="order"){let t=e.order.shipping_address?.country_code?.toLowerCase();n.push(`/${t}/order/confirmed/${e.order.id}`)}else e?.error&&r(e.error.message)},onError:e=>{r(e.message)}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eG.Button,{isDisabled:e,isLoading:s.isPending,onPress:()=>{a()},className:"w-full",children:"Place order"}),(0,o.jsx)(e0.A,{error:t})]})},tN=(0,l.R)(({cart:e,selectPaymentMethod:t})=>{let r=!e||!e.shipping_address||!e.billing_address||!e.email||(e.shipping_methods?.length??0)<1,s=e.payment_collection?.payment_sessions?.[0];switch(!0){case ez(s?.provider_id):return(0,o.jsx)(tj,{notReady:r,cart:e});case eB(s?.provider_id):return(0,o.jsx)(tE,{notReady:r});case eM(s?.provider_id):return(0,o.jsx)(tw,{notReady:r,cart:e});default:return(0,o.jsx)(eG.Button,{className:"w-full",onPress:()=>{t()},children:"Select a payment method"})}}),tP=({cart:e})=>{let t=(0,u.useSearchParams)(),r=(0,u.useRouter)(),s=(0,u.usePathname)(),n="review"===t.get("step"),a=e.shipping_address&&e.shipping_methods&&e.shipping_methods.length>0&&e.payment_collection;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex justify-between mb-6 md:mb-8 border-t border-grayscale-200 pt-8 mt-8",children:[(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:(0,eV.Id)("transition-fontWeight duration-75",n&&"font-semibold"),children:"5. Review"})}),!n&&a&&e?.shipping_address&&e?.billing_address&&e?.email&&(0,o.jsx)(eG.Button,{variant:"link",onPress:()=>{r.push(s+"?step=review",{scroll:!1})},children:"View"})]}),n&&a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"mb-8",children:"By clicking the Place Order button, you confirm that you have read, understand and accept our Terms of Use, Terms of Sale and Returns Policy and acknowledge that you have read Medusa Store's Privacy Policy."}),(0,o.jsx)(tN,{cart:e,selectPaymentMethod:()=>{r.push(s+"?step=payment",{scroll:!1})}})]})]})};var tC=r(65374);let tS=(0,l.R)(({countryCode:e,step:t})=>{let{data:r,isPending:s}=(0,e2._$)({enabled:!0}),n=(0,u.useRouter)();return(d().useEffect(()=>{if(!t&&r){let t=(0,tC.N)(r);n.push(`/${e}/checkout?step=${t}`)}},[t,e,r]),s)?(0,o.jsx)("div",{className:"absolute left-0 top-20 md:top-40 lg:top-0 w-[100vw] lg:max-w-[calc(100vw-((50vw-50%)+448px))] xl:max-w-[calc(100vw-((50vw-50%)+540px))] -ml-[calc(50vw-50%)] h-screen lg:w-full flex items-center justify-center",children:(0,o.jsx)(eJ.I,{name:"loader",className:"w-10 md:w-20 animate-spin"})}):r?(0,o.jsxs)(eY,{cart:r,children:[(0,o.jsx)(e8,{countryCode:e,cart:r}),(0,o.jsx)(tu,{cart:r}),(0,o.jsx)(tm,{cart:r}),(0,o.jsx)(tb,{cart:r}),(0,o.jsx)(tP,{cart:r})]}):null})},73795:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>o});var s=r(78738);r(83723);var n=r(83161),a=r(33459),i=r(44779);let o={title:"Checkout"};async function l({params:e,searchParams:t}){if(!await (0,a.Cy)())return(0,n.notFound)();let{countryCode:r}=await e,{step:o}=await t;return(0,s.jsx)(i.CheckoutForm,{countryCode:r,step:o})}},77251:(e,t,r)=>{var s=r(20094),n=r(1827),a=r(66646),i=r(40788),o=r(15195),l=r(84460);e.exports=function(e,t,r){t=s(t,e);for(var c=-1,d=t.length,u=!1;++c<d;){var p=l(t[c]);if(!(u=null!=e&&r(e,p)))break;e=e[p]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&o(d)&&i(p,d)&&(a(e)||n(e))}},78438:(e,t,r)=>{var s=r(93323),n=r(16557),a=r(37041),i=r(65019);e.exports=function(e){return function(t){var r=n(t=i(t))?a(t):void 0,o=r?r[0]:t.charAt(0),l=r?s(r,1).join(""):t.slice(1);return o[e]()+l}}},78577:e=>{e.exports=function(e){return e}},81951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,a.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,o.isDynamicPostpone)(t)||(0,n.isPostpone)(t)||(0,s.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let s=r(82391),n=r(4500),a=r(37345),i=r(59013),o=r(68946),l=r(30760);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},82504:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(18928),n=r(37346),a=r(36223),i=r(63056),o=r(54034);function l(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6 mb-8 lg:mb-16"}),(0,s.jsxs)("div",{className:"flex gap-4 lg:gap-6 mb-8",children:[(0,s.jsx)(o.E,{colorScheme:"white",className:"w-25 lg:w-33 aspect-[3/4]"}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 justify-between",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 justify-between",children:(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 max-lg:text-xs",children:[(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"}),(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"})]})]})]}),(0,s.jsxs)("div",{className:"flex max-sm:flex-col gap-x-6 gap-y-4 mb-8",children:[(0,s.jsx)(o.E,{colorScheme:"white",className:"h-12 lg:h-14 flex-1"}),(0,s.jsx)(o.E,{colorScheme:"white",className:"lg:h-14 flex-1 sm:max-w-23 h-12"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 lg:gap-1 mb-8",children:[(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"}),(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"}),(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-6"})]}),(0,s.jsx)("div",{className:"flex justify-between text-md",children:(0,s.jsx)(o.E,{colorScheme:"white",className:"w-full h-8"})})]})}let c=(0,i.R)(function(){let{data:e,isPending:t}=(0,a._$)({enabled:!0});return t||!e?(0,s.jsx)(l,{}):(0,s.jsx)(n.A,{cart:e})})},83161:(e,t,r)=>{"use strict";var s=r(53213);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},84460:(e,t,r)=>{var s=r(62851),n=1/0;e.exports=function(e){if("string"==typeof e||s(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}},86217:(e,t,r)=>{Promise.resolve().then(r.bind(r,44779))},90081:(e,t,r)=>{"use strict";var s=r(24398);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,a,i){if(i!==s){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},92793:(e,t,r)=>{var s=r(55931);e.exports=function(e){var t=s(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},92861:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(95682),n=r(48661),a=r(77677),i=r.n(a),o=r(45602),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["[countryCode]",{children:["(checkout)",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,73795)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(checkout)/checkout/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,13464)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(checkout)/checkout/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,99135)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(checkout)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,38285)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(checkout)/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,86939)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,29609)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,58126,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78263,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(checkout)/checkout/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/[countryCode]/(checkout)/checkout/page",pathname:"/[countryCode]/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93323:(e,t,r)=>{var s=r(70721);e.exports=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:s(e,t,r)}},94789:(e,t,r)=>{e.exports=r(90081)()},95665:(e,t,r)=>{e.exports=r(78438)("toUpperCase")},96673:(e,t,r)=>{var s=r(65019),n=r(95665);e.exports=function(e){return n(s(e).toLowerCase())}},97189:(e,t,r)=>{"use strict";function s(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return s}}),r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},97569:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"00232b28cff24d3100f18ca2a1683bfa99a999875f":()=>y,"006bddeacfc95ef002f06bde5f16f6a8083cd1d682":()=>s.wH,"00bded693ed9b0cdf5ed2c973683e424b7406dbcbb":()=>s.N$,"00f5fe133921a5ce0f1594e267cba4d5479cbfbcad":()=>s.WY,"4007126042dbc103aba7c15c2101418804cb56bdfb":()=>s.xI,"4021e119797219b692105980f04f5b9e31e68514a2":()=>s.KG,"4035ed211eda92f28c644015f1c2a7a5e856f4c557":()=>N,"40415220440f4519ed94d151f048614ebd92a9a93b":()=>m,"404b7e5ee1d746266b7cfd790987e634b6fdcfc97b":()=>s.eB,"4077292a6ed1621105d284440340064d4c7926b925":()=>P,"408365d4bde57da8d7d6736508f1035424827eb47c":()=>s.U3,"408868b8c7684fbc2bd30f0ec34fe353b8bad5808d":()=>f,"4088bfba47dd609a4fb3ce87c8222aa84de7b4da28":()=>h,"408b2021cebc6fa3cc290fa091c3d295153bce2737":()=>s.JZ,"409df3d8f7d139c48687dcac8640d47048bb2f0458":()=>s.ZM,"40adda278827f3f545836329b7618ac6b6a0c691bd":()=>s.E1,"40b7dd6017bc524286a7953d0bafc3769748bf3569":()=>s.xe,"40c3f131c25facb08e0fa599037ed8f922e08667b9":()=>s.bE,"40f8245e7e4a40fee76a60b1cb3d08c18c0a87cd83":()=>s.Zy,"603c7bc1a0b4a32df5ac8b7e9584da48498d908226":()=>w,"604d5bf737a1c6d8b417041ced538af87032f2b268":()=>E,"60d55478ff5437fc1d4bc93b9827b1057f89e64094":()=>s.Ye,"60de4684a383e1859033da784934c7f65176672e73":()=>s.M7,"7f45177e1e81b9073fd8b918dc02f33e8cfcfe35eb":()=>p,"7f4bc786c75ff01cb97e82d5b88bbc05f5be1f9b0b":()=>x,"7f516838f9dd406a760cd759a7d23b9f615130d14d":()=>v,"7f6781c4d466e12d1ff98f2802f9db754a2a94e8bc":()=>u,"7fdec238a9f44f5fc4b235f690e5940cf0f26f0186":()=>g});var s=r(28693),n=r(52376);r(2134);var a=r(58602),i=r(95070),o=r(58133),l=r(1530),c=r(63420),d=r(60930);let u=async function(){return await l.x.client.fetch("/store/customers/me",{next:{tags:["customer"]},headers:{...await (0,c.z5)()},cache:"no-store"}).then(({customer:e})=>e).catch(()=>null)},p=async function(e){return l.x.store.customer.update({first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},await (0,c.z5)()).then(()=>((0,o.revalidateTag)("customer"),{state:"success"})).catch(()=>((0,o.revalidateTag)("customer"),{state:"error",error:"Failed to update customer personal information"}))};async function m(e){try{let t=await l.x.auth.register("customer","emailpass",{email:e.email,password:e.password}),r={authorization:`Bearer ${t}`},{customer:s}=await l.x.store.customer.create({email:e.email,first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},r),n=await l.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof n)return(0,i.redirect)(n.location),{success:!0,customer:s};await (0,c.O5)(n),await l.x.client.fetch("/store/custom/customer/send-welcome-email",{method:"POST",headers:await (0,c.z5)()}),(0,o.revalidateTag)("customer");let a=await (0,c.Cy)();return a&&(await l.x.store.cart.transferCart(a,{},await (0,c.z5)()),(0,o.revalidateTag)("cart")),{success:!0,customer:s}}catch(e){return{success:!1,error:e instanceof Error?e.message:`${e}`}}}async function f(e){let t=e.redirect_url;try{let r=await l.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof r)return{success:!0,redirectUrl:r.location};await (0,c.O5)(r),(0,o.revalidateTag)("customer");let s=await (0,c.Cy)();return s&&(await l.x.store.cart.transferCart(s,{},await (0,c.z5)()),(0,o.revalidateTag)("cart")),{success:!0,redirectUrl:t||"/"}}catch(e){return{success:!1,message:e instanceof Error?e.message:`${e}`}}}async function h(e){return await l.x.auth.logout(),await (0,c.QF)(),(0,o.revalidateTag)("customer"),e}let g=async e=>l.x.store.customer.createAddress({first_name:e.first_name,last_name:e.last_name,company:e.company??void 0,address_1:e.address_1,address_2:e.address_2??void 0,city:e.city,postal_code:e.postal_code,province:e.province??void 0,country_code:e.country_code,phone:e.phone??void 0},{},await (0,c.z5)()).then(({customer:e})=>((0,o.revalidateTag)("customer"),{addressId:e.addresses[e.addresses.length-1].id,success:!0,error:null})).catch(e=>((0,o.revalidateTag)("customer"),{addressId:"",success:!1,error:e.toString()})),x=async e=>{if("string"!=typeof e)throw Error("Invalid input data");await l.x.store.customer.deleteAddress(e,await (0,c.z5)()).then(()=>({success:!0,error:null})).catch(e=>({success:!1,error:e.toString()})),(0,o.revalidateTag)("customer")},v=async(e,t)=>{if(!e)throw Error("Invalid input data");return l.x.store.customer.updateAddress(e,{first_name:t.first_name,last_name:t.last_name,company:t.company??void 0,address_1:t.address_1,address_2:t.address_2??void 0,city:t.city,postal_code:t.postal_code,province:t.province??void 0,country_code:t.country_code,phone:t.phone??void 0},{},await (0,c.z5)()).then(()=>((0,o.revalidateTag)("customer"),{addressId:e,success:!0,error:null})).catch(t=>((0,o.revalidateTag)("customer"),{addressId:e,success:!1,error:t.toString()}))};async function y(){let e=await u();return e?(await l.x.auth.resetPassword("logged-in-customer","emailpass",{identifier:e.email}),{success:!0}):{success:!1,error:"No customer found"}}let b=a.z.object({email:a.z.string().email(),token:a.z.string()}),_=a.z.object({type:a.z.literal("reset"),current_password:a.z.string().min(6),new_password:a.z.string().min(6),confirm_new_password:a.z.string().min(6)}),j=a.z.object({type:a.z.literal("forgot"),new_password:a.z.string().min(6),confirm_new_password:a.z.string().min(6)});async function w(e,t){let r=b.parse(e);if("reset"===t.type)try{await l.x.auth.login("customer","emailpass",{email:r.email,password:t.current_password})}catch(e){return{...r,state:"error",error:"Wrong password"}}return l.x.auth.updateProvider("reset"===t.type?"logged-in-customer":"customer","emailpass",{email:r.email,password:t.new_password},r.token).then(()=>({...r,state:"success"})).catch(()=>({...r,state:"error",error:"Failed to update password"}))}async function E(e,t){return l.x.auth.resetPassword("customer","emailpass",{identifier:t.email}).then(()=>({state:"success"})).catch(()=>({state:"error",error:"Failed to reset password"}))}async function N(e){return e?l.x.store.customer.updateAddress(e,{is_default_shipping:!0},{},await (0,c.z5)()).then(()=>((0,o.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,o.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}async function P(e){return e?l.x.store.customer.updateAddress(e,{is_default_billing:!0},{},await (0,c.z5)()).then(()=>((0,o.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,o.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}a.z.discriminatedUnion("type",[_,j]),a.z.object({email:a.z.string().email()}),(0,d.D)([u,p,m,f,h,g,x,v,y,w,E,N,P]),(0,n.A)(u,"7f6781c4d466e12d1ff98f2802f9db754a2a94e8bc",null),(0,n.A)(p,"7f45177e1e81b9073fd8b918dc02f33e8cfcfe35eb",null),(0,n.A)(m,"40415220440f4519ed94d151f048614ebd92a9a93b",null),(0,n.A)(f,"408868b8c7684fbc2bd30f0ec34fe353b8bad5808d",null),(0,n.A)(h,"4088bfba47dd609a4fb3ce87c8222aa84de7b4da28",null),(0,n.A)(g,"7fdec238a9f44f5fc4b235f690e5940cf0f26f0186",null),(0,n.A)(x,"7f4bc786c75ff01cb97e82d5b88bbc05f5be1f9b0b",null),(0,n.A)(v,"7f516838f9dd406a760cd759a7d23b9f615130d14d",null),(0,n.A)(y,"00232b28cff24d3100f18ca2a1683bfa99a999875f",null),(0,n.A)(w,"603c7bc1a0b4a32df5ac8b7e9584da48498d908226",null),(0,n.A)(E,"604d5bf737a1c6d8b417041ced538af87032f2b268",null),(0,n.A)(N,"4035ed211eda92f28c644015f1c2a7a5e856f4c557",null),(0,n.A)(P,"4077292a6ed1621105d284440340064d4c7926b925",null)},98498:(e,t,r)=>{var s=r(42933),n=r(3170);e.exports=function e(t,r,a,i,o){var l=-1,c=t.length;for(a||(a=n),o||(o=[]);++l<c;){var d=t[l];r>0&&a(d)?r>1?e(d,r-1,a,i,o):s(o,d):i||(o[o.length]=d)}return o}},99135:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(78738);r(83723);var n=r(68032),a=r(99559),i=r(32975);let o=(0,i.default)(()=>Promise.resolve().then(r.bind(r,44201)),{loadableGenerated:{modules:["app/[countryCode]/(checkout)/layout.tsx -> @modules/checkout/components/checkout-summary-wrapper"]},loading:()=>(0,s.jsx)(s.Fragment,{})}),l=(0,i.default)(()=>Promise.resolve().then(r.bind(r,34898)),{loadableGenerated:{modules:["app/[countryCode]/(checkout)/layout.tsx -> @modules/checkout/components/mobile-checkout-summary-wrapper"]},loading:()=>(0,s.jsx)(s.Fragment,{})});function c({children:e}){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.PE,{className:"lg:hidden",children:(0,s.jsx)(n.$B,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-18",children:[(0,s.jsx)(a.LocalizedLink,{href:"/",className:"text-md font-medium",children:"SofaSocietyCo."}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"font-semibold",children:"Checkout"})})]})})}),(0,s.jsx)("div",{className:"w-full bg-grayscale-50 lg:hidden",children:(0,s.jsx)(n.PE,{children:(0,s.jsx)(n.$B,{children:(0,s.jsx)(l,{})})})}),(0,s.jsx)(n.PE,{children:(0,s.jsxs)(n.$B,{className:"flex max-lg:flex-col-reverse lg:justify-between relative",children:[(0,s.jsxs)("div",{className:"flex-1 pt-8 lg:max-w-125 xl:max-w-150 pb-9 lg:pb-40",children:[(0,s.jsx)(a.LocalizedLink,{href:"/",className:"text-md font-medium mb-16 inline-block max-lg:hidden",children:"SofaSocietyCo."}),e]}),(0,s.jsx)("div",{className:"sticky top-0 lg:max-w-100 xl:max-w-123 flex-1 py-32 max-lg:hidden z-10 self-start",children:(0,s.jsx)(o,{})}),(0,s.jsx)("div",{className:"absolute right-0 top-0 lg:max-w-[calc((50vw-50%)+448px)] xl:max-w-[calc((50vw-50%)+540px)] -mr-[calc(50vw-50%)] bg-grayscale-50 h-full w-full max-lg:hidden"})]})})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[790,216,834,37,80,207,565,782],()=>r(92861));module.exports=s})();