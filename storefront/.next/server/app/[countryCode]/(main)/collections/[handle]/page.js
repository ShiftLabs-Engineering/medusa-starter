(()=>{var e={};e.id=300,e.ids=[300],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27290:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63798,23)),Promise.resolve().then(r.bind(r,4926)),Promise.resolve().then(r.bind(r,21307))},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30187:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b,generateMetadata:()=>x,generateStaticParams:()=>f});var a=r(78738),s=r(83161),o=r(92453),n=r(26445),i=r(83723),l=r(5137),d=r(50625),c=r(3747),p=r(58173),u=r(48623),m=r(68032),g=r(53214),h=r(66899);async function _({sortBy:e,collection:t,category:r,type:s,page:o,countryCode:_}){let f=o?parseInt(o):1,x=d.T.safeParse(t.metadata??{}),[b,j,y]=await Promise.all([(0,g.He)(0,100,["id","name","handle"]),(0,h.J)(0,100,["id","value"]),(0,n.JN)(_)]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"max-md:mt-18 relative aspect-[2/1] md:h-screen w-full max-w-full mb-8 md:mb-19",children:(0,a.jsx)(l.default,{src:x.data?.collection_page_image?.url||"/images/content/living-room-gray-two-seater-puffy-sofa.png",fill:!0,alt:t.title+" image",className:"object-cover z-0"})}),x.success&&("string"==typeof x.data.collection_page_heading&&x.data.collection_page_heading.length>0||"string"==typeof x.data.collection_page_content&&x.data.collection_page_content.length>0)&&(0,a.jsxs)(m.PE,{className:"mb-26 md:mb-36",children:[x.data.collection_page_heading&&(0,a.jsx)(m.$B,{start:1,end:{base:13,lg:7},children:(0,a.jsx)("h3",{className:"text-md max-md:mb-6 md:text-2xl",children:x.data.collection_page_heading})}),x.data.collection_page_content&&(0,a.jsx)(m.$B,{start:{base:1,lg:8},end:13,children:(0,a.jsx)("div",{className:"md:text-md md:mt-18 flex flex-col gap-5 md:gap-9",children:x.data.collection_page_content.split("\n").map(e=>e.trim()).filter(Boolean).map((e,t)=>(0,a.jsx)("p",{children:e},t))})})]}),(0,a.jsx)(p.default,{sortBy:e,title:t.title,categories:Object.fromEntries(b.product_categories.map(e=>[e.handle,e.name])),category:r,types:Object.fromEntries(j.productTypes.map(e=>[e.value,e.value])),type:s}),(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)(c.A,{}),children:y&&(0,a.jsx)(u.default,{sortBy:e,page:f,collectionId:t.id,countryCode:_,categoryId:r?b.product_categories.filter(e=>r.includes(e.handle)).map(e=>e.id):void 0,typeId:s?j.productTypes.filter(e=>s.includes(e.value)).map(e=>e.id):void 0})}),(0,a.jsx)("div",{className:"pb-10 md:pb-20"})]})}async function f(){let{collections:e}=await (0,o.KS)();if(!e)return[];let t=await (0,n.OZ)().then(e=>e?.map(e=>e.countries?.map(e=>e.iso_2)).flat().filter(Boolean)),r=e.map(e=>e.handle);return t?.map(e=>r.map(t=>({countryCode:e,handle:t}))).flat()}async function x({params:e}){let{handle:t}=await e,r=await (0,o.gn)(t,["id","title","metadata"]);r||(0,s.notFound)();let a=d.T.safeParse(r.metadata??{});return{title:`${r.title} | Medusa Store`,description:a.success&&a.data.description?a.data.description:`${r.title} collection`}}async function b({params:e,searchParams:t}){let{handle:r,countryCode:n}=await e,{sortBy:i,page:l,category:d,type:c}=await t,p=await (0,o.gn)(r,["id","title","metadata"]);return p||(0,s.notFound)(),(0,a.jsx)(_,{collection:p,page:l,sortBy:i,countryCode:n,category:d?Array.isArray(d)?d:[d]:void 0,type:c?Array.isArray(c)?c:[c]:void 0})}},33873:e=>{"use strict";e.exports=require("path")},37906:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,26128,23)),Promise.resolve().then(r.bind(r,58173)),Promise.resolve().then(r.bind(r,48623))},50625:(e,t,r)=>{"use strict";r.d(t,{T:()=>s});var a=r(64101);let s=a.z.object({image:a.z.object({id:a.z.string(),url:a.z.string().url()}).optional(),description:a.z.string().optional(),collection_page_image:a.z.object({id:a.z.string(),url:a.z.string().url()}).optional(),collection_page_heading:a.z.string().optional(),collection_page_content:a.z.string().optional(),product_page_heading:a.z.string().optional(),product_page_image:a.z.object({id:a.z.string(),url:a.z.string().url()}).optional(),product_page_wide_image:a.z.object({id:a.z.string(),url:a.z.string().url()}).optional(),product_page_cta_image:a.z.object({id:a.z.string(),url:a.z.string().url()}).optional(),product_page_cta_heading:a.z.string().optional(),product_page_cta_link:a.z.string().optional()})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},89651:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(95682),s=r(48661),o=r(77677),n=r.n(o),i=r(45602),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["[countryCode]",{children:["(main)",{children:["collections",{children:["[handle]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,30187)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/collections/[handle]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,34664)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,21212)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,86939)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,29609)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,58126,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78263,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/collections/[handle]/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/[countryCode]/(main)/collections/[handle]/page",pathname:"/[countryCode]/collections/[handle]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[790,216,137,221,37,80,565,502,491],()=>r(89651));module.exports=a})();