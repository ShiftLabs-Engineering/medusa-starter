(()=>{var e={};e.id=758,e.ids=[758],e.modules={1467:(e,r,t)=>{"use strict";t.d(r,{ForgotPasswordForm:()=>m});var s=t(18928),a=t(91153),o=t(62920),n=t(39994),i=t(400);let c=(0,i.createServerReference)("60b15ede6f5043ac93ca71ca877d6b4a75ee24c62f",i.callServer,void 0,i.findSourceMapURL,"forgotPassword");var d=t(25673),l=t(10567);let u=l.z.object({email:l.z.string().min(3).email()}),m=()=>{let[e,r]=a.useActionState(c,{state:"initial"});return"success"===e.state?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-xl md:text-2xl mb-8",children:"Your password is waiting for you!"}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("p",{children:"We've sent you an email with further instructions on retrieving your account."})}),(0,s.jsx)(d.LocalizedButtonLink,{href:"/",isFullWidth:!0,children:"Back to home page"})]}):(0,s.jsxs)(o.lV,{onSubmit:e=>{a.startTransition(()=>{r(e)})},schema:u,children:[(0,s.jsx)("h1",{className:"text-xl md:text-2xl mb-8",children:"Forgot password?"}),(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsx)("p",{children:"Enter your email address below and we will send you instructions on how to reset your password."})}),(0,s.jsx)(o.FO,{placeholder:"Email",name:"email",className:"flex-1 mb-8",type:"email"}),"error"===e.state&&(0,s.jsx)("p",{className:"text-red-primary text-sm",children:e.error}),(0,s.jsx)(n.SubmitButton,{isFullWidth:!0,children:"Reset your password"})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18825:(e,r,t)=>{Promise.resolve().then(t.bind(t,91971)),Promise.resolve().then(t.bind(t,77646)),Promise.resolve().then(t.bind(t,93685)),Promise.resolve().then(t.bind(t,2479)),Promise.resolve().then(t.bind(t,41452)),Promise.resolve().then(t.bind(t,36426)),Promise.resolve().then(t.bind(t,25673)),Promise.resolve().then(t.bind(t,97305)),Promise.resolve().then(t.bind(t,24392)),Promise.resolve().then(t.bind(t,84117))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21212:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n,metadata:()=>o});var s=t(78738),a=t(29609);let o={title:"404",description:"Something went wrong"};function n(){return(0,s.jsx)(a.default,{})}},28354:e=>{"use strict";e.exports=require("util")},28553:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,36197,23)),Promise.resolve().then(t.t.bind(t,57232,23)),Promise.resolve().then(t.bind(t,2159)),Promise.resolve().then(t.bind(t,10679)),Promise.resolve().then(t.bind(t,84594)),Promise.resolve().then(t.bind(t,78524)),Promise.resolve().then(t.bind(t,99559)),Promise.resolve().then(t.bind(t,46631)),Promise.resolve().then(t.bind(t,72028)),Promise.resolve().then(t.bind(t,78947))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34664:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c,metadata:()=>i});var s=t(78738),a=t(8339),o=t(51029),n=t(10679);let i={metadataBase:new URL((0,a.v)())};async function c(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Y,{}),e.children,(0,s.jsx)(n.Footer,{})]})}},53725:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,26128,23)),Promise.resolve().then(t.bind(t,67643))},53733:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00b1b5703fbbf8f61b2b24a649377b5cf29d480b0e":()=>s.N$,"00c051bf2c4aeb4ae7a36825676a1ebd030e871906":()=>g,"00d0dada74b9ec77b0a5d77f651dcc95549144a7f8":()=>s.wH,"00e0803885072790ca8860c6958667bd2d028b84c5":()=>s.WY,"400584a2a19089eab10fa1d9c4100163e5a0f8be62":()=>f,"40142c0a31904f0551f584d2de1f6a7e54acb5b014":()=>s.bE,"4017f60e607533a63429e82286d8b7ca6571bce7bf":()=>s.ZM,"402f6ec674199a516266d9ea9c17de0196c3299e88":()=>z,"40555880fbdda12ea633e4ce950a2f11dbbcc15190":()=>s.Zy,"4056cbab58e04c5036039b3dc6e214e13fdf7a417d":()=>s.E1,"406952256cd95e66244d7f808211493e97e14d0cd6":()=>s.KG,"4073415b2bdcda5d588f1ec4343341d9ab6853c8ed":()=>s.xe,"40762b8fb9498ea59ff66dadf07ff5cd06c0f5cebb":()=>p,"40a19158c177f9a97d48b3056123c1a94a3ac3e1aa":()=>F,"40ac00fff6ea1dd3c05977455266823e0067652a53":()=>b,"40b0bf0aad832f76dca8c9bf2f7cab4d57deb5db91":()=>s.xI,"40c38a0385ce854946b3002691a247ea586fff5704":()=>s.eB,"40d1b9d99267fa9420cc52d9a5f5715a027b2ebcc5":()=>s.U3,"40e70f7a8be9b1ce7fc8e53d484c8ba2eae087c803":()=>s.JZ,"607be41d8bd9c2f357740891ea60939b8b8435e483":()=>P,"60888ad5afcb7abb3741ccfbe6a89256231e138936":()=>s.M7,"608dfa9dd4fd10b3f02786e481d35c8db373fdf953":()=>s.Ye,"60b15ede6f5043ac93ca71ca877d6b4a75ee24c62f":()=>j,"7f0bb8038e044ef1e4bc367db1a68ba8a10d5d3042":()=>m,"7f2033791f0cbdaf286b9ad01eb95b37e1ea5ea250":()=>w,"7f4fe5a127ebb849795af4b8d9029d4a508178ad04":()=>u,"7f8181c26e2f699a0e551d1e37a4b677b8789036a1":()=>h,"7fd9f44c8b1fcad73f97d8919530753ebc4364880f":()=>v});var s=t(28693),a=t(52376);t(2134);var o=t(58602),n=t(95070),i=t(58133),c=t(1530),d=t(63420),l=t(60930);let u=async function(){return await c.x.client.fetch("/store/customers/me",{next:{tags:["customer"]},headers:{...await (0,d.z5)()},cache:"no-store"}).then(({customer:e})=>e).catch(()=>null)},m=async function(e){return c.x.store.customer.update({first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},await (0,d.z5)()).then(()=>((0,i.revalidateTag)("customer"),{state:"success"})).catch(()=>((0,i.revalidateTag)("customer"),{state:"error",error:"Failed to update customer personal information"}))};async function f(e){try{let r=await c.x.auth.register("customer","emailpass",{email:e.email,password:e.password}),t={authorization:`Bearer ${r}`},{customer:s}=await c.x.store.customer.create({email:e.email,first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},t),a=await c.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof a)return(0,n.redirect)(a.location),{success:!0,customer:s};await (0,d.O5)(a),await c.x.client.fetch("/store/custom/customer/send-welcome-email",{method:"POST",headers:await (0,d.z5)()}),(0,i.revalidateTag)("customer");let o=await (0,d.Cy)();return o&&(await c.x.store.cart.transferCart(o,{},await (0,d.z5)()),(0,i.revalidateTag)("cart")),{success:!0,customer:s}}catch(e){return{success:!1,error:e instanceof Error?e.message:`${e}`}}}async function b(e){let r=e.redirect_url;try{let t=await c.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof t)return{success:!0,redirectUrl:t.location};await (0,d.O5)(t),(0,i.revalidateTag)("customer");let s=await (0,d.Cy)();return s&&(await c.x.store.cart.transferCart(s,{},await (0,d.z5)()),(0,i.revalidateTag)("cart")),{success:!0,redirectUrl:r||"/"}}catch(e){return{success:!1,message:e instanceof Error?e.message:`${e}`}}}async function p(e){return await c.x.auth.logout(),await (0,d.QF)(),(0,i.revalidateTag)("customer"),e}let h=async e=>c.x.store.customer.createAddress({first_name:e.first_name,last_name:e.last_name,company:e.company??void 0,address_1:e.address_1,address_2:e.address_2??void 0,city:e.city,postal_code:e.postal_code,province:e.province??void 0,country_code:e.country_code,phone:e.phone??void 0},{},await (0,d.z5)()).then(({customer:e})=>((0,i.revalidateTag)("customer"),{addressId:e.addresses[e.addresses.length-1].id,success:!0,error:null})).catch(e=>((0,i.revalidateTag)("customer"),{addressId:"",success:!1,error:e.toString()})),v=async e=>{if("string"!=typeof e)throw Error("Invalid input data");await c.x.store.customer.deleteAddress(e,await (0,d.z5)()).then(()=>({success:!0,error:null})).catch(e=>({success:!1,error:e.toString()})),(0,i.revalidateTag)("customer")},w=async(e,r)=>{if(!e)throw Error("Invalid input data");return c.x.store.customer.updateAddress(e,{first_name:r.first_name,last_name:r.last_name,company:r.company??void 0,address_1:r.address_1,address_2:r.address_2??void 0,city:r.city,postal_code:r.postal_code,province:r.province??void 0,country_code:r.country_code,phone:r.phone??void 0},{},await (0,d.z5)()).then(()=>((0,i.revalidateTag)("customer"),{addressId:e,success:!0,error:null})).catch(r=>((0,i.revalidateTag)("customer"),{addressId:e,success:!1,error:r.toString()}))};async function g(){let e=await u();return e?(await c.x.auth.resetPassword("logged-in-customer","emailpass",{identifier:e.email}),{success:!0}):{success:!1,error:"No customer found"}}let x=o.z.object({email:o.z.string().email(),token:o.z.string()}),y=o.z.object({type:o.z.literal("reset"),current_password:o.z.string().min(6),new_password:o.z.string().min(6),confirm_new_password:o.z.string().min(6)}),_=o.z.object({type:o.z.literal("forgot"),new_password:o.z.string().min(6),confirm_new_password:o.z.string().min(6)});async function P(e,r){let t=x.parse(e);if("reset"===r.type)try{await c.x.auth.login("customer","emailpass",{email:t.email,password:r.current_password})}catch(e){return{...t,state:"error",error:"Wrong password"}}return c.x.auth.updateProvider("reset"===r.type?"logged-in-customer":"customer","emailpass",{email:t.email,password:r.new_password},t.token).then(()=>({...t,state:"success"})).catch(()=>({...t,state:"error",error:"Failed to update password"}))}async function j(e,r){return c.x.auth.resetPassword("customer","emailpass",{identifier:r.email}).then(()=>({state:"success"})).catch(()=>({state:"error",error:"Failed to reset password"}))}async function z(e){return e?c.x.store.customer.updateAddress(e,{is_default_shipping:!0},{},await (0,d.z5)()).then(()=>((0,i.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,i.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}async function F(e){return e?c.x.store.customer.updateAddress(e,{is_default_billing:!0},{},await (0,d.z5)()).then(()=>((0,i.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,i.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}o.z.discriminatedUnion("type",[y,_]),o.z.object({email:o.z.string().email()}),(0,l.D)([u,m,f,b,p,h,v,w,g,P,j,z,F]),(0,a.A)(u,"7f4fe5a127ebb849795af4b8d9029d4a508178ad04",null),(0,a.A)(m,"7f0bb8038e044ef1e4bc367db1a68ba8a10d5d3042",null),(0,a.A)(f,"400584a2a19089eab10fa1d9c4100163e5a0f8be62",null),(0,a.A)(b,"40ac00fff6ea1dd3c05977455266823e0067652a53",null),(0,a.A)(p,"40762b8fb9498ea59ff66dadf07ff5cd06c0f5cebb",null),(0,a.A)(h,"7f8181c26e2f699a0e551d1e37a4b677b8789036a1",null),(0,a.A)(v,"7fd9f44c8b1fcad73f97d8919530753ebc4364880f",null),(0,a.A)(w,"7f2033791f0cbdaf286b9ad01eb95b37e1ea5ea250",null),(0,a.A)(g,"00c051bf2c4aeb4ae7a36825676a1ebd030e871906",null),(0,a.A)(P,"607be41d8bd9c2f357740891ea60939b8b8435e483",null),(0,a.A)(j,"60b15ede6f5043ac93ca71ca877d6b4a75ee24c62f",null),(0,a.A)(z,"402f6ec674199a516266d9ea9c17de0196c3299e88",null),(0,a.A)(F,"40a19158c177f9a97d48b3056123c1a94a3ac3e1aa",null)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67643:(e,r,t)=>{"use strict";t.d(r,{ForgotPasswordForm:()=>s});let s=(0,t(75362).registerClientReference)(function(){throw Error("Attempted to call ForgotPasswordForm() from the server but ForgotPasswordForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/auth/components/ForgotPasswordForm.tsx","ForgotPasswordForm")},70384:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>n});var s=t(78738),a=t(5137),o=t(67643);let n={title:"Forgot password",description:"Reset your password"};function i(){return(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(a.default,{src:"/images/content/gray-backrest-sofa-wooden-coffee-table.png",width:1440,height:1632,alt:"Gray backrest sofa and wooden coffee table",className:"max-lg:hidden lg:w-1/2 shrink-0 object-cover"}),(0,s.jsx)("div",{className:"shrink-0 max-w-100 lg:max-w-96 w-full mx-auto pt-30 lg:pt-37 pb-16 max-sm:px-4",children:(0,s.jsx)(o.ForgotPasswordForm,{})})]})}},72285:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,63798,23)),Promise.resolve().then(t.bind(t,1467))},94455:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>d});var s=t(95682),a=t(48661),o=t(77677),n=t.n(o),i=t(45602),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(r,c);let d={children:["",{children:["[countryCode]",{children:["(main)",{children:["auth",{children:["forgot-password",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,70384)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/auth/forgot-password/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,34664)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,21212)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,86939)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,29609)),"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,58126,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,78263,23)),"next/dist/client/components/unauthorized-error"]}]}.children,l=["/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/app/[countryCode]/(main)/auth/forgot-password/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/[countryCode]/(main)/auth/forgot-password/page",pathname:"/[countryCode]/auth/forgot-password",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[790,216,137,565],()=>t(94455));module.exports=s})();