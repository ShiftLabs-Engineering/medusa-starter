exports.id=841,exports.ids=[841],exports.modules={10688:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return a}});let a=r(81951).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10915:(e,t,r)=>{Promise.resolve().then(r.bind(r,65511))},18825:(e,t,r)=>{Promise.resolve().then(r.bind(r,91971)),Promise.resolve().then(r.bind(r,77646)),Promise.resolve().then(r.bind(r,93685)),Promise.resolve().then(r.bind(r,2479)),Promise.resolve().then(r.bind(r,41452)),Promise.resolve().then(r.bind(r,36426)),Promise.resolve().then(r.bind(r,25673)),Promise.resolve().then(r.bind(r,97305)),Promise.resolve().then(r.bind(r,24392)),Promise.resolve().then(r.bind(r,84117))},21212:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var a=r(78738),s=r(29609);let o={title:"404",description:"Something went wrong"};function n(){return(0,a.jsx)(s.default,{})}},27100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return s}});let a=""+r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function s(){let e=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=a,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},28553:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,36197,23)),Promise.resolve().then(r.t.bind(r,57232,23)),Promise.resolve().then(r.bind(r,2159)),Promise.resolve().then(r.bind(r,10679)),Promise.resolve().then(r.bind(r,84594)),Promise.resolve().then(r.bind(r,78524)),Promise.resolve().then(r.bind(r,99559)),Promise.resolve().then(r.bind(r,46631)),Promise.resolve().then(r.bind(r,72028)),Promise.resolve().then(r.bind(r,78947))},34664:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>d});var a=r(78738),s=r(8339),o=r(51029),n=r(10679);let d={metadataBase:new URL((0,s.v)())};async function i(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Y,{}),e.children,(0,a.jsx)(n.Footer,{})]})}},39030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return n},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return c},permanentRedirect:function(){return i},redirect:function(){return d}});let a=r(35275),s=r(58917),o=r(19121).actionAsyncStorage;function n(e,t,r){void 0===r&&(r=a.RedirectStatusCode.TemporaryRedirect);let o=Object.defineProperty(Error(s.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return o.digest=s.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function d(e,t){var r;throw null!=t||(t=(null==o||null==(r=o.getStore())?void 0:r.isAction)?s.RedirectType.push:s.RedirectType.replace),n(e,t,a.RedirectStatusCode.TemporaryRedirect)}function i(e,t){throw void 0===t&&(t=s.RedirectType.replace),n(e,t,a.RedirectStatusCode.PermanentRedirect)}function c(e){return(0,s.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,s.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function l(e){if(!(0,s.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},41400:(e,t,r)=>{"use strict";function a(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return a}}),r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return u},RedirectType:function(){return s.RedirectType},forbidden:function(){return n.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unauthorized:function(){return d.unauthorized},unstable_rethrow:function(){return i.unstable_rethrow}});let a=r(39030),s=r(58917),o=r(27100),n=r(97189),d=r(41400),i=r(10688);class c extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class u extends URLSearchParams{append(){throw new c}delete(){throw new c}set(){throw new c}sort(){throw new c}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53733:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"00b1b5703fbbf8f61b2b24a649377b5cf29d480b0e":()=>a.N$,"00c051bf2c4aeb4ae7a36825676a1ebd030e871906":()=>g,"00d0dada74b9ec77b0a5d77f651dcc95549144a7f8":()=>a.wH,"00e0803885072790ca8860c6958667bd2d028b84c5":()=>a.WY,"400584a2a19089eab10fa1d9c4100163e5a0f8be62":()=>b,"40142c0a31904f0551f584d2de1f6a7e54acb5b014":()=>a.bE,"4017f60e607533a63429e82286d8b7ca6571bce7bf":()=>a.ZM,"402f6ec674199a516266d9ea9c17de0196c3299e88":()=>x,"40555880fbdda12ea633e4ce950a2f11dbbcc15190":()=>a.Zy,"4056cbab58e04c5036039b3dc6e214e13fdf7a417d":()=>a.E1,"406952256cd95e66244d7f808211493e97e14d0cd6":()=>a.KG,"4073415b2bdcda5d588f1ec4343341d9ab6853c8ed":()=>a.xe,"40762b8fb9498ea59ff66dadf07ff5cd06c0f5cebb":()=>p,"40a19158c177f9a97d48b3056123c1a94a3ac3e1aa":()=>E,"40ac00fff6ea1dd3c05977455266823e0067652a53":()=>m,"40b0bf0aad832f76dca8c9bf2f7cab4d57deb5db91":()=>a.xI,"40c38a0385ce854946b3002691a247ea586fff5704":()=>a.eB,"40d1b9d99267fa9420cc52d9a5f5715a027b2ebcc5":()=>a.U3,"40e70f7a8be9b1ce7fc8e53d484c8ba2eae087c803":()=>a.JZ,"607be41d8bd9c2f357740891ea60939b8b8435e483":()=>P,"60888ad5afcb7abb3741ccfbe6a89256231e138936":()=>a.M7,"608dfa9dd4fd10b3f02786e481d35c8db373fdf953":()=>a.Ye,"60b15ede6f5043ac93ca71ca877d6b4a75ee24c62f":()=>j,"7f0bb8038e044ef1e4bc367db1a68ba8a10d5d3042":()=>f,"7f2033791f0cbdaf286b9ad01eb95b37e1ea5ea250":()=>w,"7f4fe5a127ebb849795af4b8d9029d4a508178ad04":()=>l,"7f8181c26e2f699a0e551d1e37a4b677b8789036a1":()=>_,"7fd9f44c8b1fcad73f97d8919530753ebc4364880f":()=>h});var a=r(28693),s=r(52376);r(2134);var o=r(58602),n=r(95070),d=r(58133),i=r(1530),c=r(63420),u=r(60930);let l=async function(){return await i.x.client.fetch("/store/customers/me",{next:{tags:["customer"]},headers:{...await (0,c.z5)()},cache:"no-store"}).then(({customer:e})=>e).catch(()=>null)},f=async function(e){return i.x.store.customer.update({first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},await (0,c.z5)()).then(()=>((0,d.revalidateTag)("customer"),{state:"success"})).catch(()=>((0,d.revalidateTag)("customer"),{state:"error",error:"Failed to update customer personal information"}))};async function b(e){try{let t=await i.x.auth.register("customer","emailpass",{email:e.email,password:e.password}),r={authorization:`Bearer ${t}`},{customer:a}=await i.x.store.customer.create({email:e.email,first_name:e.first_name,last_name:e.last_name,phone:e.phone??void 0},{},r),s=await i.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof s)return(0,n.redirect)(s.location),{success:!0,customer:a};await (0,c.O5)(s),await i.x.client.fetch("/store/custom/customer/send-welcome-email",{method:"POST",headers:await (0,c.z5)()}),(0,d.revalidateTag)("customer");let o=await (0,c.Cy)();return o&&(await i.x.store.cart.transferCart(o,{},await (0,c.z5)()),(0,d.revalidateTag)("cart")),{success:!0,customer:a}}catch(e){return{success:!1,error:e instanceof Error?e.message:`${e}`}}}async function m(e){let t=e.redirect_url;try{let r=await i.x.auth.login("customer","emailpass",{email:e.email,password:e.password});if("object"==typeof r)return{success:!0,redirectUrl:r.location};await (0,c.O5)(r),(0,d.revalidateTag)("customer");let a=await (0,c.Cy)();return a&&(await i.x.store.cart.transferCart(a,{},await (0,c.z5)()),(0,d.revalidateTag)("cart")),{success:!0,redirectUrl:t||"/"}}catch(e){return{success:!1,message:e instanceof Error?e.message:`${e}`}}}async function p(e){return await i.x.auth.logout(),await (0,c.QF)(),(0,d.revalidateTag)("customer"),e}let _=async e=>i.x.store.customer.createAddress({first_name:e.first_name,last_name:e.last_name,company:e.company??void 0,address_1:e.address_1,address_2:e.address_2??void 0,city:e.city,postal_code:e.postal_code,province:e.province??void 0,country_code:e.country_code,phone:e.phone??void 0},{},await (0,c.z5)()).then(({customer:e})=>((0,d.revalidateTag)("customer"),{addressId:e.addresses[e.addresses.length-1].id,success:!0,error:null})).catch(e=>((0,d.revalidateTag)("customer"),{addressId:"",success:!1,error:e.toString()})),h=async e=>{if("string"!=typeof e)throw Error("Invalid input data");await i.x.store.customer.deleteAddress(e,await (0,c.z5)()).then(()=>({success:!0,error:null})).catch(e=>({success:!1,error:e.toString()})),(0,d.revalidateTag)("customer")},w=async(e,t)=>{if(!e)throw Error("Invalid input data");return i.x.store.customer.updateAddress(e,{first_name:t.first_name,last_name:t.last_name,company:t.company??void 0,address_1:t.address_1,address_2:t.address_2??void 0,city:t.city,postal_code:t.postal_code,province:t.province??void 0,country_code:t.country_code,phone:t.phone??void 0},{},await (0,c.z5)()).then(()=>((0,d.revalidateTag)("customer"),{addressId:e,success:!0,error:null})).catch(t=>((0,d.revalidateTag)("customer"),{addressId:e,success:!1,error:t.toString()}))};async function g(){let e=await l();return e?(await i.x.auth.resetPassword("logged-in-customer","emailpass",{identifier:e.email}),{success:!0}):{success:!1,error:"No customer found"}}let y=o.z.object({email:o.z.string().email(),token:o.z.string()}),v=o.z.object({type:o.z.literal("reset"),current_password:o.z.string().min(6),new_password:o.z.string().min(6),confirm_new_password:o.z.string().min(6)}),R=o.z.object({type:o.z.literal("forgot"),new_password:o.z.string().min(6),confirm_new_password:o.z.string().min(6)});async function P(e,t){let r=y.parse(e);if("reset"===t.type)try{await i.x.auth.login("customer","emailpass",{email:r.email,password:t.current_password})}catch(e){return{...r,state:"error",error:"Wrong password"}}return i.x.auth.updateProvider("reset"===t.type?"logged-in-customer":"customer","emailpass",{email:r.email,password:t.new_password},r.token).then(()=>({...r,state:"success"})).catch(()=>({...r,state:"error",error:"Failed to update password"}))}async function j(e,t){return i.x.auth.resetPassword("customer","emailpass",{identifier:t.email}).then(()=>({state:"success"})).catch(()=>({state:"error",error:"Failed to reset password"}))}async function x(e){return e?i.x.store.customer.updateAddress(e,{is_default_shipping:!0},{},await (0,c.z5)()).then(()=>((0,d.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,d.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}async function E(e){return e?i.x.store.customer.updateAddress(e,{is_default_billing:!0},{},await (0,c.z5)()).then(()=>((0,d.revalidateTag)("customer"),{success:!0,error:null})).catch(e=>((0,d.revalidateTag)("customer"),{success:!1,error:e.toString()})):{success:!1,error:"No address id provided"}}o.z.discriminatedUnion("type",[v,R]),o.z.object({email:o.z.string().email()}),(0,u.D)([l,f,b,m,p,_,h,w,g,P,j,x,E]),(0,s.A)(l,"7f4fe5a127ebb849795af4b8d9029d4a508178ad04",null),(0,s.A)(f,"7f0bb8038e044ef1e4bc367db1a68ba8a10d5d3042",null),(0,s.A)(b,"400584a2a19089eab10fa1d9c4100163e5a0f8be62",null),(0,s.A)(m,"40ac00fff6ea1dd3c05977455266823e0067652a53",null),(0,s.A)(p,"40762b8fb9498ea59ff66dadf07ff5cd06c0f5cebb",null),(0,s.A)(_,"7f8181c26e2f699a0e551d1e37a4b677b8789036a1",null),(0,s.A)(h,"7fd9f44c8b1fcad73f97d8919530753ebc4364880f",null),(0,s.A)(w,"7f2033791f0cbdaf286b9ad01eb95b37e1ea5ea250",null),(0,s.A)(g,"00c051bf2c4aeb4ae7a36825676a1ebd030e871906",null),(0,s.A)(P,"607be41d8bd9c2f357740891ea60939b8b8435e483",null),(0,s.A)(j,"60b15ede6f5043ac93ca71ca877d6b4a75ee24c62f",null),(0,s.A)(x,"402f6ec674199a516266d9ea9c17de0196c3299e88",null),(0,s.A)(E,"40a19158c177f9a97d48b3056123c1a94a3ac3e1aa",null)},65511:(e,t,r)=>{"use strict";r.d(t,{ChangePasswordForm:()=>a});let a=(0,r(75362).registerClientReference)(function(){throw Error("Attempted to call ChangePasswordForm() from the server but ChangePasswordForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/josi/Documents/ShiftLabs/Projects/medusa-starter/storefront/src/modules/auth/components/ResetPasswordForm.tsx","ChangePasswordForm")},68144:(e,t,r)=>{Promise.resolve().then(r.bind(r,93729))},81951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,n.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,i.isDynamicServerError)(t)||(0,d.isDynamicPostpone)(t)||(0,s.isPostpone)(t)||(0,a.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let a=r(82391),s=r(4500),o=r(37345),n=r(59013),d=r(68946),i=r(30760);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},83161:(e,t,r)=>{"use strict";var a=r(53213);r.o(a,"notFound")&&r.d(t,{notFound:function(){return a.notFound}}),r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}})},93729:(e,t,r)=>{"use strict";r.d(t,{ChangePasswordForm:()=>h});var a=r(18928),s=r(91153),o=r(53502),n=r(400);let d=(0,n.createServerReference)("607be41d8bd9c2f357740891ea60939b8b8435e483",n.callServer,void 0,n.findSourceMapURL,"resetPassword");var i=r(39994),c=r(62920),u=r(10567),l=r(54404),f=r(13984),b=r(87491);let m=u.z.object({type:u.z.literal("reset"),current_password:u.z.string().min(6),new_password:u.z.string().min(6),confirm_new_password:u.z.string().min(6)}),p=u.z.object({type:u.z.literal("forgot"),new_password:u.z.string().min(6),confirm_new_password:u.z.string().min(6)}),_=u.z.discriminatedUnion("type",[m,p]).superRefine((e,t)=>{e.new_password!==e.confirm_new_password&&t.addIssue({code:u.z.ZodIssueCode.custom,message:"Passwords must match",path:["confirm_new_password"]}),"reset"===e.type&&e.current_password===e.new_password&&t.addIssue({code:u.z.ZodIssueCode.custom,message:"New password must be different from the current password",path:["new_password"]})}),h=({email:e,token:t,customer:r})=>{let[n,u,m]=s.useActionState(d,{email:e,token:t,state:"initial"}),[p,h]=s.useState(!1);return s.useEffect(()=>{"success"===n.state&&h(!0)},[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.lV,{onSubmit:e=>{s.startTransition(()=>u(e))},schema:_,defaultValues:r?{type:"reset"}:{type:"forgot"},children:[(0,a.jsx)("h1",{className:"text-lg mb-6 md:mb-8",children:"Reset password"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-6 md:mb-8",children:[r&&(0,a.jsx)(c.FO,{type:"password",placeholder:"Current password",name:"current_password",inputProps:{autoComplete:"current-password"}}),(0,a.jsx)(c.FO,{type:"password",placeholder:"New password",name:"new_password",inputProps:{autoComplete:"new-password"}}),(0,a.jsx)(c.FO,{type:"password",placeholder:"Confirm new password",name:"confirm_new_password",inputProps:{autoComplete:"new-password"}})]}),"error"===n.state&&(0,a.jsx)("p",{className:"text-red-primary text-sm mb-6",children:n.error}),(0,a.jsx)(i.SubmitButton,{isLoading:m,isFullWidth:!0,children:"Reset password"})]}),(0,a.jsx)(l.UiModalOverlay,{isOpen:p,isDismissable:!1,onOpenChange:e=>!e&&(0,o.redirect)("/auth/login"),className:"bg-transparent",children:(0,a.jsx)(l.UiModal,{className:"relative",children:(0,a.jsxs)(f.UiDialog,{children:[(0,a.jsx)("p",{className:"text-md mb-12",children:"Password reset successful!"}),(0,a.jsx)("p",{className:"text-grayscale-500",children:"Your password has been successfully reset. You may now use your new password to log in."}),(0,a.jsx)(f.UiCloseButton,{variant:"ghost",className:"absolute top-4 right-6 p-0",children:(0,a.jsx)(b.I,{name:"close",className:"w-6 h-6"})})]})})})]})}},97189:(e,t,r)=>{"use strict";function a(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return a}}),r(68213).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};